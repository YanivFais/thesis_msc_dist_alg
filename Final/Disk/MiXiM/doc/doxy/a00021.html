<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MiXiM: BasePhyLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BasePhyLayer Class Reference<br>
<small>
[<a class="el" href="a00303.html">phyLayer - physical layer modules</a>,&nbsp;<a class="el" href="a00309.html">baseModules - base module classes of MiXiM</a>]</small>
</h1><!-- doxytag: class="BasePhyLayer" --><!-- doxytag: inherits="ChannelAccess,DeciderToPhyInterface,MacToPhyInterface" -->The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> represents the physical layer of a nic.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="a00358.html">BasePhyLayer.h</a>&gt;</code>
<p>
Inherits <a class="el" href="a00034.html">ChannelAccess</a>, <a class="el" href="a00057.html">DeciderToPhyInterface</a>, and <a class="el" href="a00090.html">MacToPhyInterface</a>.
<p>
Inherited by <a class="el" href="a00109.html">PhyLayer</a>.
<p>
<div class="dynheader">
Collaboration diagram for BasePhyLayer:</div>
<div class="dynsection">
<p><center><img src="a00783.png" border="0" usemap="#a00784" alt="Collaboration graph"></center>
<map name="a00784">
<area shape="rect" href="a00034.html" title="Basic class for all physical layers, please don&#39;t touch!!" alt="" coords="283,63,395,89"><area shape="rect" href="a00024.html" title="Provides information and utility methods for the whole simulation." alt="" coords="24,52,141,79"><area shape="rect" href="a00057.html" title="This class is the interface for a Decider to the BasePhyLayer." alt="" coords="7,124,159,151"><area shape="rect" href="a00052.html" title="The basic Decider class." alt="" coords="307,164,371,191"><area shape="rect" href="a00090.html" title="Defines the methods provided by the phy to the mac layer." alt="" coords="272,215,405,241"><area shape="rect" href="a00112.html" title="The class that represents the Radio as a state machine." alt="" coords="312,265,365,292"><area shape="rect" href="a00042.html" title="Represents a constant mathematical mapping (f(x) = c)." alt="" coords="241,316,436,343"><area shape="rect" href="a00035.html" title="This class is used by the BasePhyLayer to keep track of the AirFrames on the channel..." alt="" coords="293,367,384,393"></map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="a00785.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#6b1702943ae38fac8dcfd82afd0424f0">BasePhyLayer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#0fc69907490ed2752d2a888ef26348ff">~BasePhyLayer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#905b025f39422a9ec57b9349ad36269c">getRadioState</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current state the radio is in.  <a href="#905b025f39422a9ec57b9349ad36269c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#5170b3aadae25dc6b9e61974076be04b">setRadioState</a> (int rs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> to switch to the specified radio state.  <a href="#5170b3aadae25dc6b9e61974076be04b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a00037.html">ChannelState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#7620c7de01e2dede5a68f13fda69e0a1">getChannelState</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current state of the channel.  <a href="#7620c7de01e2dede5a68f13fda69e0a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#089a1287c5f3812215ef9ac8dfe984e3">getChannelInfo</a> (simtime_t from, simtime_t to, <a class="el" href="a00057.html#9731ab2cbdaaf5e46cfe98ae81e5a1c3">AirFrameVector</a> &amp;out)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fills the passed AirFrameVector with all AirFrames that intersect with the time interval [from, to].  <a href="#089a1287c5f3812215ef9ac8dfe984e3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a00045.html">ConstMapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#116b328e70419037bb72e270c8d47bb9">getThermalNoise</a> (simtime_t from, simtime_t to)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a <a class="el" href="a00092.html" title="Represents a changeable mapping (mathematical function) from at least time to double...">Mapping</a> which defines the thermal noise in the passed time frame (in mW).  <a href="#116b328e70419037bb72e270c8d47bb9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#62e88e82937e0ef2b9d4adf46061ec00">sendControlMsg</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> to send a control message to the MACLayer.  <a href="#62e88e82937e0ef2b9d4adf46061ec00"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#0e9f0ccf4ed1d8377aa3f00b931a3e71">sendUp</a> (AirFrame *packet, <a class="el" href="a00055.html">DeciderResult</a> *result)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called to send an AirFrame with <a class="el" href="a00055.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a> to the MACLayer.  <a href="#0e9f0ccf4ed1d8377aa3f00b931a3e71"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#c2dce47fd96bb69e24977a7cd5f67a2c">getSimTime</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current simulation time.  <a href="#c2dce47fd96bb69e24977a7cd5f67a2c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a4c75db0828cf579907b1e9a9c683e99">cancelScheduledMessage</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to cancel a scheduled message (AirFrame or ControlMessage).  <a href="#a4c75db0828cf579907b1e9a9c683e99"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#81153199f268b4831f42b20b06959764">drawCurrent</a> (double amount, int activity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Does nothing. For an actual power supporting phy see "PhyLayerBattery".  <a href="#81153199f268b4831f42b20b06959764"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#1333b977d8e274e32b80a4b300c96bc1">AirFrameStates</a> { <a class="el" href="a00021.html#1333b977d8e274e32b80a4b300c96bc1a0cb17278ea70e7e327de30aad32e0a0">START_RECEIVE</a> =  1, 
<a class="el" href="a00021.html#1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755">RECEIVING</a>, 
<a class="el" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157">END_RECEIVE</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector<br class="typebreak">
&lt; <a class="el" href="a00001.html">AnalogueModel</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#c8dca20c727bdb1494d97da1c64bb55d">AnalogueModelList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to store the AnalogueModels to be used as filters.  <a href="#c8dca20c727bdb1494d97da1c64bb55d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::map&lt; std::string, <br class="typebreak">
cMsgPar &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used at initialisation to pass the parameters to the <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> and <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>.  <a href="#f29abf3259af16b051ce48b0db7a64c0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#08704deaf03b73c8eda67cc60e670853">initialize</a> (int stage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OMNeT++ initialization function. Read simple parameters. Read and parse xml file for decider and analogue models configuration.  <a href="#08704deaf03b73c8eda67cc60e670853"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#3880154c8db8b8efb5315cb6ef8f6c41">handleMessage</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OMNeT++ handle message function.  <a href="#3880154c8db8b8efb5315cb6ef8f6c41"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a00001.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#419df7f53684ee758de1dcabb959e10f">getAnalogueModelFromName</a> (std::string name, <a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and returns an instance of the <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> with the specified name.  <a href="#419df7f53684ee758de1dcabb959e10f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a00052.html">Decider</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#095d1b5fd25b9ada3ac86d3c9237c3f8">getDeciderFromName</a> (std::string name, <a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and returns an instance of the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> with the specified name.  <a href="#095d1b5fd25b9ada3ac86d3c9237c3f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#8d65e4a85336642f234bf0b1172336dc">handleAirFrame</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles messages received from the channel (probably AirFrames).  <a href="#8d65e4a85336642f234bf0b1172336dc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#17b1d469775962d23835dd5f43a639ac">handleUpperMessage</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles messages received from the upper layer through the data gate.  <a href="#17b1d469775962d23835dd5f43a639ac"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#4cab267d310b5fd6cefe613fc8dfe71d">handleUpperControlMessage</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles messages received from the upper layer through the control gate.  <a href="#4cab267d310b5fd6cefe613fc8dfe71d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#17088ad93f59e143ff6c7ba866a31982">handleSelfMessage</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles self scheduled messages.  <a href="#17088ad93f59e143ff6c7ba866a31982"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#6866e3f79df84cdb5550a51d6502463f">handleChannelSenseRequest</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles reception of a ChannelSenseRequest by forwarding it to the decider and scheduling it to the point in time returned by the decider.  <a href="#6866e3f79df84cdb5550a51d6502463f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#d0e987003f09275647a060e8a72cc5fa">handleAirFrameFirstReceive</a> (AirFrame *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state FIRST_RECEIVE.  <a href="#d0e987003f09275647a060e8a72cc5fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#671f083680882230b754b7e9578e6274">handleAirFrameStartReceive</a> (AirFrame *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state START_RECEIVE.  <a href="#671f083680882230b754b7e9578e6274"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#9dbbcf0004b22c622ec4b06a19b4f564">handleAirFrameReceiving</a> (AirFrame *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state RECEIVING.  <a href="#9dbbcf0004b22c622ec4b06a19b4f564"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#4f8fde562c0004b498fc3294c3f54c2f">handleAirFrameEndReceive</a> (AirFrame *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state END_RECEIVE.  <a href="#4f8fde562c0004b498fc3294c3f54c2f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#aa439e85a8bc20a39477055aecf04993">sendControlMessageUp</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the passed control message to the upper layer.  <a href="#aa439e85a8bc20a39477055aecf04993"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#f5ac9665c3f3eaee7846ef0ba141b858">sendMacPktUp</a> (cMessage *pkt)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the passed MacPkt to the upper layer.  <a href="#f5ac9665c3f3eaee7846ef0ba141b858"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#1fe847ed3e50ccf3a3740234dfee42b1">sendMessageDown</a> (AirFrame *pkt)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the passed AirFrame to the channel.  <a href="#1fe847ed3e50ccf3a3740234dfee42b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#7ac9dcc2ca7a8d140ddded4e9f1b37f0">sendSelfMessage</a> (cMessage *msg, simtime_t time)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedule self message to passed point in time.  <a href="#7ac9dcc2ca7a8d140ddded4e9f1b37f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">AirFrame *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#1e42622259807fe3cf06935e7a818ccf">encapsMsg</a> (cPacket *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function encapsulates messages from the upper layer into an AirFrame and sets all necessary attributes.  <a href="#1e42622259807fe3cf06935e7a818ccf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#51940490b6927a6976b53b9f5c2178d4">filterSignal</a> (<a class="el" href="a00124.html">Signal</a> &amp;s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Filters the passed <a class="el" href="a00124.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> by every registered <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>.  <a href="#51940490b6927a6976b53b9f5c2178d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#da6c556e50ead146f822dadf6ea2a472">finishRadioSwitching</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called the moment the simulated switching process of the <a class="el" href="a00112.html" title="The class that represents the Radio as a state machine.">Radio</a> is finished.  <a href="#da6c556e50ead146f822dadf6ea2a472"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00042.html">ConstantSimpleConstMapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756">thermalNoise</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines the strength of the thermal noise.  <a href="#fedc2cd6f80601fb040b56256e6cc756"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#80fe7028b2fbf92f61dd30b79e30a86d">maxTXPower</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum transmission power a message can be send with.  <a href="#80fe7028b2fbf92f61dd30b79e30a86d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#7eaa041636b623066b5abd87a38afa25">sensitivity</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The sensitivity describes the minimum strength a signal must have to be received.  <a href="#7eaa041636b623066b5abd87a38afa25"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00035.html">ChannelInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#38d35bc99079eff49deb6c870b1175e7">channelInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channel info keeps track of received AirFrames and provides information about currently active AirFrames at the channel.  <a href="#38d35bc99079eff49deb6c870b1175e7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00112.html">Radio</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166">radio</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The state machine storing the current radio state (TX, RX, SLEEP).  <a href="#6aefa7200582ec18d6ac5f8f8092a166"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00052.html">Decider</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4">decider</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the decider module.  <a href="#5be00b3a133596d8ed78a9f8e38973d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#c8dca20c727bdb1494d97da1c64bb55d">AnalogueModelList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93">analogueModels</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of the analogue models to use.  <a href="#bc00fc5777ef641f72b5a4d85bf65c93"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#31262af527f17ed1a41d70f616f2aa08">upperGateIn</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the in-data gate from the Mac layer.  <a href="#31262af527f17ed1a41d70f616f2aa08"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#0643f7dce4e8aa1b8490b11ba176a38a">upperGateOut</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the out-data gate to the Mac layer.  <a href="#0643f7dce4e8aa1b8490b11ba176a38a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#ca9b66970dd836cc696dd0907c58598b">upperControlOut</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the out-control gate to the Mac layer.  <a href="#ca9b66970dd836cc696dd0907c58598b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#b58c7430371f1ba135e0a641d150c1e3">upperControlIn</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the in-control gate from the Mac layer.  <a href="#b58c7430371f1ba135e0a641d150c1e3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#c28de586b21162c377a180233299a1d5">radioSwitchingOverTimer</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Self message scheduled to the point in time when the switching process of the radio is over.  <a href="#c28de586b21162c377a180233299a1d5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#2ce22bc20ab469e99352958face5468d">txOverTimer</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Self message scheduled to the point in time when the transmission of an AirFrame is over.  <a href="#2ce22bc20ab469e99352958face5468d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#48f5fc0fe990ee5dbe31911437a586f9">headerLength</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores the length of the phy header in bits.  <a href="#48f5fc0fe990ee5dbe31911437a586f9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00024.html">BaseWorldUtility</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#d1de573273df163a5fc2b8b537c65e23">world</a></td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a89a9272b99ab3005347301c2effc254">getParametersFromXML</a> (cXMLElement *xmlData, <a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;outputMap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Utility function. Reads the parameters of a XML element and stores them in the passed ParameterMap reference.  <a href="#a89a9272b99ab3005347301c2effc254"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#8ea7353793eed2f1a7b0cd1caacd72e9">initializeAnalogueModels</a> (cXMLElement *xmlConfig)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the AnalogueModels with the data from the passed XML-config data.  <a href="#8ea7353793eed2f1a7b0cd1caacd72e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#9da4f8ffaa373a0de7895cbea524816b">initializeDecider</a> (cXMLElement *xmlConfig)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> with the data from the passed XML-config data.  <a href="#9da4f8ffaa373a0de7895cbea524816b"></a><br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">T&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e">readPar</a> (const char *parName, const T defaultValue)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads and returns the parameter with the passed name.  <a href="#1fb6d85cc9a8de0c1ff8393e1541f53e"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> represents the physical layer of a nic. 
<p>
The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> is directly connected to the mac layer via OMNeT channels and is able to send messages to other physical layers through sub-classing from ChannelAcces.<p>
The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> encapsulates two sub modules. The AnalogueModels, which are responsible for simulating the attenuation of received signals and the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> which provides the main functionality of the physical layer like signal classification (noise or not noise) and demodulation (calculating transmission errors).<p>
The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> itself is responsible for the OMNeT depended parts of the physical layer which are the following:<p>
Module initialization:<ul>
<li>read ned-parameters and initialize module, <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> and AnalogueModels.</li></ul>
<p>
Message handling:<ul>
<li>receive messages from mac layer and hand them to the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> or directly send them to the channel</li><li>receive AirFrames from the channel, hand them to the AnalogueModels for filtering, simulate delay and transmission duration, hand it to the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> for evaluation and send received packets to the mac layer</li><li>keep track of currently active AirFrames on the channel (see <a class="el" href="a00035.html" title="This class is used by the BasePhyLayer to keep track of the AirFrames on the channel...">ChannelInfo</a>)</li></ul>
<p>
The actual evaluation of incoming signals is done by the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>.<p>
base class <a class="el" href="a00034.html" title="Basic class for all physical layers, please don&#39;t touch!!">ChannelAccess</a>:<ul>
<li>provides access to the channel via the <a class="el" href="a00041.html" title="BaseConnectionManager implementation which only defines a specific max interference...">ConnectionManager</a></li></ul>
<p>
base class <a class="el" href="a00057.html" title="This class is the interface for a Decider to the BasePhyLayer.">DeciderToPhyInterface</a>:<ul>
<li>interface for the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a></li></ul>
<p>
base class <a class="el" href="a00090.html" title="Defines the methods provided by the phy to the mac layer.">MacToPhyInterface</a>:<ul>
<li>interface for the Mac </li></ul>

<p>Definition at line <a class="el" href="a00358.html#l00068">68</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="c8dca20c727bdb1494d97da1c64bb55d"></a><!-- doxytag: member="BasePhyLayer::AnalogueModelList" ref="c8dca20c727bdb1494d97da1c64bb55d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="a00001.html">AnalogueModel</a>*&gt; <a class="el" href="a00021.html#c8dca20c727bdb1494d97da1c64bb55d">BasePhyLayer::AnalogueModelList</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used to store the AnalogueModels to be used as filters. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00096">96</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="f29abf3259af16b051ce48b0db7a64c0"></a><!-- doxytag: member="BasePhyLayer::ParameterMap" ref="f29abf3259af16b051ce48b0db7a64c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::string, cMsgPar&gt; <a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">BasePhyLayer::ParameterMap</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used at initialisation to pass the parameters to the <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> and <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00105">105</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

</div>
</div><p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="1333b977d8e274e32b80a4b300c96bc1"></a><!-- doxytag: member="BasePhyLayer::AirFrameStates" ref="1333b977d8e274e32b80a4b300c96bc1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00021.html#1333b977d8e274e32b80a4b300c96bc1">BasePhyLayer::AirFrameStates</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="1333b977d8e274e32b80a4b300c96bc1a0cb17278ea70e7e327de30aad32e0a0"></a><!-- doxytag: member="START_RECEIVE" ref="1333b977d8e274e32b80a4b300c96bc1a0cb17278ea70e7e327de30aad32e0a0" args="" -->START_RECEIVE</em>&nbsp;</td><td>
Start of actual receiving process of the AirFrame. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755"></a><!-- doxytag: member="RECEIVING" ref="1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755" args="" -->RECEIVING</em>&nbsp;</td><td>
AirFrame is being received. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157"></a><!-- doxytag: member="END_RECEIVE" ref="1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" args="" -->END_RECEIVE</em>&nbsp;</td><td>
Receiving process over. </td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="a00358.html#l00128">128</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00128"></a>00128                       {
<a name="l00130"></a>00130     <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc1a0cb17278ea70e7e327de30aad32e0a0" title="Start of actual receiving process of the AirFrame.">START_RECEIVE</a> = 1,
<a name="l00132"></a>00132     <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755" title="AirFrame is being received.">RECEIVING</a>,
<a name="l00134"></a>00134     <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>
<a name="l00135"></a>00135   };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="6b1702943ae38fac8dcfd82afd0424f0"></a><!-- doxytag: member="BasePhyLayer::BasePhyLayer" ref="6b1702943ae38fac8dcfd82afd0424f0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasePhyLayer::BasePhyLayer           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00357.html#l00015">15</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00015"></a>00015                           :
<a name="l00016"></a>00016   <a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>(0),
<a name="l00017"></a>00017   <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>(0),
<a name="l00018"></a>00018   <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>(0),
<a name="l00019"></a>00019   <a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>(0),
<a name="l00020"></a>00020   <a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>(0),
<a name="l00021"></a>00021   <a class="code" href="a00021.html#d1de573273df163a5fc2b8b537c65e23">world</a>(0)
<a name="l00022"></a>00022 {}

</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0fc69907490ed2752d2a888ef26348ff"></a><!-- doxytag: member="BasePhyLayer::~BasePhyLayer" ref="0fc69907490ed2752d2a888ef26348ff" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasePhyLayer::~BasePhyLayer           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free the pointer to the decider and the AnalogueModels and the <a class="el" href="a00112.html" title="The class that represents the Radio as a state machine.">Radio</a>. 
<p>Definition at line <a class="el" href="a00357.html#l00592">592</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00099">analogueModels</a>, <a class="el" href="a00358.html#l00093">decider</a>, <a class="el" href="a00377.html#l00442">Radio::getAnalogueModel()</a>, <a class="el" href="a00358.html#l00090">radio</a>, <a class="el" href="a00358.html#l00120">radioSwitchingOverTimer</a>, <a class="el" href="a00358.html#l00075">thermalNoise</a>, and <a class="el" href="a00358.html#l00126">txOverTimer</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00592"></a>00592                             {
<a name="l00593"></a>00593   <span class="comment">//free timer messages</span>
<a name="l00594"></a>00594   <span class="comment">//TOPROFILE: check BasePhy destruction for memory leaks</span>
<a name="l00595"></a>00595   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>) {
<a name="l00596"></a>00596         <span class="keywordflow">if</span>(<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>-&gt;isScheduled())
<a name="l00597"></a>00597             cancelEvent(<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>);
<a name="l00598"></a>00598     <span class="keyword">delete</span> <a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>;
<a name="l00599"></a>00599   }
<a name="l00600"></a>00600   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>) {
<a name="l00601"></a>00601         <span class="keywordflow">if</span>(<a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>-&gt;isScheduled())
<a name="l00602"></a>00602             cancelEvent(<a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>);
<a name="l00603"></a>00603 
<a name="l00604"></a>00604     <span class="keyword">delete</span> <a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>;
<a name="l00605"></a>00605   }
<a name="l00606"></a>00606 
<a name="l00607"></a>00607   <span class="comment">//free thermal noise mapping</span>
<a name="l00608"></a>00608   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>) {
<a name="l00609"></a>00609     <span class="keyword">delete</span> <a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>;
<a name="l00610"></a>00610   }
<a name="l00611"></a>00611 
<a name="l00612"></a>00612   <span class="comment">//free Decider</span>
<a name="l00613"></a>00613   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a> != 0) {
<a name="l00614"></a>00614     <span class="keyword">delete</span> <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>;
<a name="l00615"></a>00615   }
<a name="l00616"></a>00616 
<a name="l00617"></a>00617   <span class="comment">/*</span>
<a name="l00618"></a>00618 <span class="comment">   * get a pointer to the radios RSAM again to avoid deleting it,</span>
<a name="l00619"></a>00619 <span class="comment">   * it is not created by calling new (BasePhyLayer is not the owner)!</span>
<a name="l00620"></a>00620 <span class="comment">   */</span>
<a name="l00621"></a>00621   <a class="code" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>* rsamPointer = <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#4903c7a92d2d890c04b27bbdf133cf92" title="Returns a pointer to the RadioStateAnalogueModel.">getAnalogueModel</a>();
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   <span class="comment">//free AnalogueModels</span>
<a name="l00624"></a>00624   <span class="keywordflow">for</span>(AnalogueModelList::iterator it = <a class="code" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.begin();
<a name="l00625"></a>00625     it != <a class="code" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.end(); it++) {
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     <a class="code" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>* tmp = *it;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629     <span class="comment">// do not delete the RSAM, it's not allocated by new!</span>
<a name="l00630"></a>00630     <span class="keywordflow">if</span> (tmp == rsamPointer)
<a name="l00631"></a>00631     {
<a name="l00632"></a>00632       rsamPointer = 0;
<a name="l00633"></a>00633       <span class="keywordflow">continue</span>;
<a name="l00634"></a>00634     }
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     <span class="keywordflow">if</span>(tmp != 0) {
<a name="l00637"></a>00637       <span class="keyword">delete</span> tmp;
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639   }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 
<a name="l00642"></a>00642   <span class="comment">// free radio</span>
<a name="l00643"></a>00643   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a> != 0)
<a name="l00644"></a>00644   {
<a name="l00645"></a>00645     <span class="keyword">delete</span> <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>;
<a name="l00646"></a>00646   }
<a name="l00647"></a>00647 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4c75db0828cf579907b1e9a9c683e99"></a><!-- doxytag: member="BasePhyLayer::cancelScheduledMessage" ref="a4c75db0828cf579907b1e9a9c683e99" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::cancelScheduledMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tells the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to cancel a scheduled message (AirFrame or ControlMessage). 
<p>
Used by the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> if it has to handle an AirFrame or an control message earlier than it has returned to the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> the last time the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> handled that message. 
<p>Implements <a class="el" href="a00057.html#f85151048dba05ec27e378000fd95403">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00734">734</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00734"></a>00734                                                        {
<a name="l00735"></a>00735   <span class="keywordflow">if</span>(msg-&gt;isScheduled()){
<a name="l00736"></a>00736     cancelEvent(msg);
<a name="l00737"></a>00737   } <span class="keywordflow">else</span> {
<a name="l00738"></a>00738     EV &lt;&lt; <span class="stringliteral">"Warning: Decider wanted to cancel a scheduled message but message"</span>
<a name="l00739"></a>00739        &lt;&lt; <span class="stringliteral">" wasn't actually scheduled. Message is: "</span> &lt;&lt; msg &lt;&lt; endl;
<a name="l00740"></a>00740   }
<a name="l00741"></a>00741 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="81153199f268b4831f42b20b06959764"></a><!-- doxytag: member="BasePhyLayer::drawCurrent" ref="81153199f268b4831f42b20b06959764" args="(double amount, int activity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::drawCurrent           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>activity</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Does nothing. For an actual power supporting phy see "PhyLayerBattery". 
<p>

<p>Implements <a class="el" href="a00057.html#1ee7d31b5bf0cda9e543ac91b3aaecc5">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00743">743</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00465.html#l00079">PhyLayerBattery::handleSelfMessage()</a>, <a class="el" href="a00465.html#l00067">PhyLayerBattery::handleUpperMessage()</a>, and <a class="el" href="a00465.html#l00020">PhyLayerBattery::initialize()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00743"></a>00743                                                           {
<a name="l00744"></a>00744   <a class="code" href="a00021.html#81153199f268b4831f42b20b06959764" title="Does nothing. For an actual power supporting phy see &amp;quot;PhyLayerBattery&amp;quot;...">BatteryAccess::drawCurrent</a>(amount, activity);
<a name="l00745"></a>00745 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1e42622259807fe3cf06935e7a818ccf"></a><!-- doxytag: member="BasePhyLayer::encapsMsg" ref="1e42622259807fe3cf06935e7a818ccf" args="(cPacket *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AirFrame * BasePhyLayer::encapsMsg           </td>
          <td>(</td>
          <td class="paramtype">cPacket *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function encapsulates messages from the upper layer into an AirFrame and sets all necessary attributes. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00448">448</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00368.html#l00028">MacToPhyInterface::AIR_FRAME</a>, <a class="el" href="a00378.html#l00115">Signal::getSignalLength()</a>, <a class="el" href="a00349.html#l00075">BaseWorldUtility::getUniqueAirFrameId()</a>, <a class="el" href="a00358.html#l00138">headerLength</a>, <a class="el" href="a00322.html#l00071">ChannelAccess::move</a>, <a class="el" href="a00367.html#l00059">MacToPhyControlInfo::retrieveSignal()</a>, <a class="el" href="a00378.html#l00157">Signal::setMove()</a>, and <a class="el" href="a00358.html#l00141">world</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00417">handleUpperMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00449"></a>00449 {
<a name="l00450"></a>00450   <span class="comment">// the cMessage passed must be a MacPacket... but no cast needed here</span>
<a name="l00451"></a>00451   <span class="comment">// MacPkt* pkt = static_cast&lt;MacPkt*&gt;(msg);</span>
<a name="l00452"></a>00452 
<a name="l00453"></a>00453   <span class="comment">// ...and must always have a ControlInfo attached (contains Signal)</span>
<a name="l00454"></a>00454   cObject* ctrlInfo = macPkt-&gt;removeControlInfo();
<a name="l00455"></a>00455   assert(ctrlInfo);
<a name="l00456"></a>00456 
<a name="l00457"></a>00457   <a class="code" href="a00089.html" title="Stores information which is needed by the physical layer when sending a MacPkt.">MacToPhyControlInfo</a>* macToPhyCI = <span class="keyword">static_cast&lt;</span><a class="code" href="a00089.html" title="Stores information which is needed by the physical layer when sending a MacPkt.">MacToPhyControlInfo</a>*<span class="keyword">&gt;</span>(ctrlInfo);
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="comment">// Retrieve the pointer to the Signal-instance from the ControlInfo-instance.</span>
<a name="l00460"></a>00460   <span class="comment">// We are now the new owner of this instance.</span>
<a name="l00461"></a>00461   <a class="code" href="a00124.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>* s = macToPhyCI-&gt;<a class="code" href="a00089.html#5e04d8d4088109ccccb7c3fcdae526a7" title="Returns a pointer to the Signal of this ControlInfo.">retrieveSignal</a>();
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="comment">// delete the Control info</span>
<a name="l00465"></a>00465   <span class="keyword">delete</span> macToPhyCI;
<a name="l00466"></a>00466   macToPhyCI = 0;
<a name="l00467"></a>00467   ctrlInfo = 0;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469   <span class="comment">// make sure we really obtained a pointer to an instance</span>
<a name="l00470"></a>00470   assert(s);
<a name="l00471"></a>00471 
<a name="l00472"></a>00472   <span class="comment">// put host move pattern to Signal</span>
<a name="l00473"></a>00473   s-&gt;<a class="code" href="a00124.html#76f3a8df29f641a296a9260961776a28" title="Sets the movement of the sending host.">setMove</a>(<a class="code" href="a00034.html#2f978b286e876d3d98c83b3548848e74" title="Last move of this host.">move</a>);
<a name="l00474"></a>00474 
<a name="l00475"></a>00475   <span class="comment">// create the new AirFrame</span>
<a name="l00476"></a>00476   AirFrame* frame = <span class="keyword">new</span> AirFrame(0, <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a5296eafe94b4f472727793a10013af7671">AIR_FRAME</a>);
<a name="l00477"></a>00477 
<a name="l00478"></a>00478   <span class="comment">// set the members</span>
<a name="l00479"></a>00479   assert(s-&gt;<a class="code" href="a00124.html#45626a4b652952d4b7d25b32164d417b" title="Returns the length of the signal transmission.">getSignalLength</a>() &gt; 0);
<a name="l00480"></a>00480   frame-&gt;setDuration(s-&gt;<a class="code" href="a00124.html#45626a4b652952d4b7d25b32164d417b" title="Returns the length of the signal transmission.">getSignalLength</a>());
<a name="l00481"></a>00481   <span class="comment">// copy the signal into the AirFrame</span>
<a name="l00482"></a>00482   frame-&gt;setSignal(*s);
<a name="l00483"></a>00483   frame-&gt;setBitLength(<a class="code" href="a00021.html#48f5fc0fe990ee5dbe31911437a586f9" title="Stores the length of the phy header in bits.">headerLength</a>);
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <span class="comment">// pointer and Signal not needed anymore</span>
<a name="l00486"></a>00486   <span class="keyword">delete</span> s;
<a name="l00487"></a>00487   s = 0;
<a name="l00488"></a>00488 
<a name="l00489"></a>00489   frame-&gt;setId(<a class="code" href="a00021.html#d1de573273df163a5fc2b8b537c65e23">world</a>-&gt;<a class="code" href="a00024.html#1c955c6c60dfa5b46a2bf683a20a84fe" title="Returns an Id for an AirFrame, at the moment simply an incremented long-value.">getUniqueAirFrameId</a>());
<a name="l00490"></a>00490   frame-&gt;encapsulate(macPkt);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492   <span class="comment">// --- from here on, the AirFrame is the owner of the MacPacket ---</span>
<a name="l00493"></a>00493   macPkt = 0;
<a name="l00494"></a>00494   EV &lt;&lt;<span class="stringliteral">"AirFrame encapsulated, length: "</span> &lt;&lt; frame-&gt;getBitLength() &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00495"></a>00495 
<a name="l00496"></a>00496   <span class="keywordflow">return</span> frame;
<a name="l00497"></a>00497 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="51940490b6927a6976b53b9f5c2178d4"></a><!-- doxytag: member="BasePhyLayer::filterSignal" ref="51940490b6927a6976b53b9f5c2178d4" args="(Signal &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::filterSignal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00124.html">Signal</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Filters the passed <a class="el" href="a00124.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> by every registered <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00581">581</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00099">analogueModels</a>, and <a class="el" href="a00001.html#1e55713377ed6af8a7ed043168ff3957">AnalogueModel::filterSignal()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00343">handleAirFrameStartReceive()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00581"></a>00581                                          {
<a name="l00582"></a>00582   <span class="keywordflow">for</span>(AnalogueModelList::const_iterator it = <a class="code" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.begin();
<a name="l00583"></a>00583     it != <a class="code" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.end(); it++) {
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <a class="code" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>* tmp = *it;
<a name="l00586"></a>00586     tmp-&gt;<a class="code" href="a00001.html#1e55713377ed6af8a7ed043168ff3957" title="Has to be overriden by every implementation.">filterSignal</a>(s);
<a name="l00587"></a>00587   }
<a name="l00588"></a>00588 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="da6c556e50ead146f822dadf6ea2a472"></a><!-- doxytag: member="BasePhyLayer::finishRadioSwitching" ref="da6c556e50ead146f822dadf6ea2a472" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::finishRadioSwitching           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called the moment the simulated switching process of the <a class="el" href="a00112.html" title="The class that represents the Radio as a state machine.">Radio</a> is finished. 
<p>
The <a class="el" href="a00112.html" title="The class that represents the Radio as a state machine.">Radio</a> is set the new RadioState and the MAC Layer is sent a confirmation message. 
<p>Definition at line <a class="el" href="a00357.html#l00657">657</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00377.html#l00422">Radio::endSwitch()</a>, <a class="el" href="a00358.html#l00090">radio</a>, <a class="el" href="a00368.html#l00024">MacToPhyInterface::RADIO_SWITCHING_OVER</a>, and <a class="el" href="a00357.html#l00710">sendControlMsg()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>, and <a class="el" href="a00357.html#l00663">setRadioState()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00658"></a>00658 {
<a name="l00659"></a>00659   <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#c37d427d9200c9ee5cde23e2b469f5f3" title="called by PhyLayer when duration-time for the current switching process is up">endSwitch</a>(simTime());
<a name="l00660"></a>00660   <a class="code" href="a00021.html#62e88e82937e0ef2b9d4adf46061ec00" title="Called by the Decider to send a control message to the MACLayer.">sendControlMsg</a>(<span class="keyword">new</span> cMessage(<span class="stringliteral">"Radio switching over"</span>, <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52876c7366bd2bcb675b41e60007831d06">RADIO_SWITCHING_OVER</a>));
<a name="l00661"></a>00661 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="419df7f53684ee758de1dcabb959e10f"></a><!-- doxytag: member="BasePhyLayer::getAnalogueModelFromName" ref="419df7f53684ee758de1dcabb959e10f" args="(std::string name, ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html">AnalogueModel</a> * BasePhyLayer::getAnalogueModelFromName           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates and returns an instance of the <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> with the specified name. 
<p>
The returned <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> has to be generated with the "new" command. The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> keeps the ownership of the returned <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>.<p>
This method is used by the <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> during initialisation to load the AnalogueModels which has been specified in the ned file.<p>
This method has to be overridden if you want to be able to load your own AnalogueModels. 
<p>Reimplemented in <a class="el" href="a00123.html#5a1cad5e4f0e2d618db45aad25f1c426">SamplePhyLayer</a>, and <a class="el" href="a00109.html#98adffcb346116dd40d956085dd906a5">PhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00278">278</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00377.html#l00442">Radio::getAnalogueModel()</a>, and <a class="el" href="a00358.html#l00090">radio</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00213">initializeAnalogueModels()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00278"></a>00278                                                                                           {
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="comment">// add default analogue models here</span>
<a name="l00281"></a>00281 
<a name="l00282"></a>00282   <span class="comment">// case "RSAM", pointer is valid as long as the radio exists</span>
<a name="l00283"></a>00283   <span class="keywordflow">if</span> (name == <span class="stringliteral">"RadioStateAnalogueModel"</span>)
<a name="l00284"></a>00284   {
<a name="l00285"></a>00285     <span class="keywordflow">return</span> <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#4903c7a92d2d890c04b27bbdf133cf92" title="Returns a pointer to the RadioStateAnalogueModel.">getAnalogueModel</a>();
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="keywordflow">return</span> 0;
<a name="l00289"></a>00289 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="089a1287c5f3812215ef9ac8dfe984e3"></a><!-- doxytag: member="BasePhyLayer::getChannelInfo" ref="089a1287c5f3812215ef9ac8dfe984e3" args="(simtime_t from, simtime_t to, AirFrameVector &amp;out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::getChannelInfo           </td>
          <td>(</td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00057.html#9731ab2cbdaaf5e46cfe98ae81e5a1c3">AirFrameVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fills the passed AirFrameVector with all AirFrames that intersect with the time interval [from, to]. 
<p>

<p>Implements <a class="el" href="a00057.html#79da727975ae1053da37157f13a08b25">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00699">699</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00087">channelInfo</a>, and <a class="el" href="a00359.html#l00159">ChannelInfo::getAirFrames()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00699"></a>00699                                                                                    {
<a name="l00700"></a>00700   <a class="code" href="a00021.html#38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00035.html#9d15c32003f533919b8b0cf9c1fa8695" title="Fills the passed AirFrameVector reference with the AirFrames which intersect with...">getAirFrames</a>(from, to, out);
<a name="l00701"></a>00701 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7620c7de01e2dede5a68f13fda69e0a1"></a><!-- doxytag: member="BasePhyLayer::getChannelState" ref="7620c7de01e2dede5a68f13fda69e0a1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00037.html">ChannelState</a> BasePhyLayer::getChannelState           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the current state of the channel. 
<p>
See <a class="el" href="a00037.html" title="Provides information about the current state of the channel:.">ChannelState</a> for details. 
<p>Implements <a class="el" href="a00090.html#24e146616912b4a59df91a12b81a38cf">MacToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00691">691</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00093">decider</a>, and <a class="el" href="a00363.html#l00016">Decider::getChannelState()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00691"></a>00691                                            {
<a name="l00692"></a>00692   Enter_Method_Silent();
<a name="l00693"></a>00693   assert(<a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>);
<a name="l00694"></a>00694   <span class="keywordflow">return</span> <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>-&gt;<a class="code" href="a00052.html#e8ada7aa9855a753d227547c6645fbc6" title="A function that returns information about the channel state.">getChannelState</a>();
<a name="l00695"></a>00695 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="095d1b5fd25b9ada3ac86d3c9237c3f8"></a><!-- doxytag: member="BasePhyLayer::getDeciderFromName" ref="095d1b5fd25b9ada3ac86d3c9237c3f8" args="(std::string name, ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00052.html">Decider</a> * BasePhyLayer::getDeciderFromName           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates and returns an instance of the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> with the specified name. 
<p>
The returned <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> has to be generated with the "new" command. The <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> keeps the ownership of the returned <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>.<p>
This method is used by the <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> during initialisation to load the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> which has been specified in the ned file.<p>
This method has to be overridden if you want to be able to load your own <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>. 
<p>Reimplemented in <a class="el" href="a00123.html#92f8ad35c7cfed1e712ee00ead259aee">SamplePhyLayer</a>, <a class="el" href="a00109.html#a09a8558e04d2aba287be91d7fbd2548">PhyLayer</a>, and <a class="el" href="a00110.html#7d09d3b83e7a6ad89682101aaa084579">PhyLayerBattery</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00205">205</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00162">initializeDecider()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00205"></a>00205                                                                               {
<a name="l00206"></a>00206 
<a name="l00207"></a>00207   <span class="keywordflow">return</span> 0;
<a name="l00208"></a>00208 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a89a9272b99ab3005347301c2effc254"></a><!-- doxytag: member="BasePhyLayer::getParametersFromXML" ref="a89a9272b99ab3005347301c2effc254" args="(cXMLElement *xmlData, ParameterMap &amp;outputMap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::getParametersFromXML           </td>
          <td>(</td>
          <td class="paramtype">cXMLElement *&nbsp;</td>
          <td class="paramname"> <em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>outputMap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Utility function. Reads the parameters of a XML element and stores them in the passed ParameterMap reference. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00117">117</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00213">initializeAnalogueModels()</a>, and <a class="el" href="a00357.html#l00162">initializeDecider()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00117"></a>00117                                                                                      {
<a name="l00118"></a>00118   cXMLElementList parameters = xmlData-&gt;getElementsByTagName(<span class="stringliteral">"Parameter"</span>);
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="keywordflow">for</span>(cXMLElementList::const_iterator it = parameters.begin();
<a name="l00121"></a>00121     it != parameters.end(); it++) {
<a name="l00122"></a>00122 
<a name="l00123"></a>00123     <span class="keyword">const</span> <span class="keywordtype">char</span>* name = (*it)-&gt;getAttribute(<span class="stringliteral">"name"</span>);
<a name="l00124"></a>00124     <span class="keyword">const</span> <span class="keywordtype">char</span>* type = (*it)-&gt;getAttribute(<span class="stringliteral">"type"</span>);
<a name="l00125"></a>00125     <span class="keyword">const</span> <span class="keywordtype">char</span>* value = (*it)-&gt;getAttribute(<span class="stringliteral">"value"</span>);
<a name="l00126"></a>00126     <span class="keywordflow">if</span>(name == 0 || type == 0 || value == 0) {
<a name="l00127"></a>00127       ev &lt;&lt; <span class="stringliteral">"Invalid parameter, could not find name, type or value."</span> &lt;&lt; endl;
<a name="l00128"></a>00128       <span class="keywordflow">continue</span>;
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     std::string sType = type;   <span class="comment">//needed for easier comparision</span>
<a name="l00132"></a>00132     std::string sValue = value; <span class="comment">//needed for easier comparision</span>
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     cMsgPar param(name);
<a name="l00135"></a>00135 
<a name="l00136"></a>00136     <span class="comment">//parse type of parameter and set value</span>
<a name="l00137"></a>00137     <span class="keywordflow">if</span> (sType == <span class="stringliteral">"bool"</span>) {
<a name="l00138"></a>00138       param.setBoolValue(sValue == <span class="stringliteral">"true"</span> || sValue == <span class="stringliteral">"1"</span>);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sType == <span class="stringliteral">"double"</span>) {
<a name="l00141"></a>00141       param.setDoubleValue(strtod(value, 0));
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sType == <span class="stringliteral">"string"</span>) {
<a name="l00144"></a>00144       param.setStringValue(value);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sType == <span class="stringliteral">"long"</span>) {
<a name="l00147"></a>00147       param.setLongValue(strtol(value, 0, 0));
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     } <span class="keywordflow">else</span> {
<a name="l00150"></a>00150       ev &lt;&lt; <span class="stringliteral">"Unknown parameter type: \""</span> &lt;&lt; sType &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; endl;
<a name="l00151"></a>00151       <span class="keywordflow">continue</span>;
<a name="l00152"></a>00152     }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="comment">//add parameter to output map</span>
<a name="l00155"></a>00155     outputMap[name] = param;
<a name="l00156"></a>00156   }
<a name="l00157"></a>00157 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="905b025f39422a9ec57b9349ad36269c"></a><!-- doxytag: member="BasePhyLayer::getRadioState" ref="905b025f39422a9ec57b9349ad36269c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BasePhyLayer::getRadioState           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the current state the radio is in. 
<p>
See RadioState for possible values.<p>
This method is mainly used by the mac layer. 
<p>Implements <a class="el" href="a00090.html#8447e9cc66ba633aa11a59387cce477c">MacToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00651">651</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00377.html#l00404">Radio::getCurrentState()</a>, and <a class="el" href="a00358.html#l00090">radio</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00651"></a>00651                                 {
<a name="l00652"></a>00652   Enter_Method_Silent();
<a name="l00653"></a>00653   assert(<a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>);
<a name="l00654"></a>00654   <span class="keywordflow">return</span> <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#1c9dcb8d49198c04d9001732e8c4421e">getCurrentState</a>();
<a name="l00655"></a>00655 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c2dce47fd96bb69e24977a7cd5f67a2c"></a><!-- doxytag: member="BasePhyLayer::getSimTime" ref="c2dce47fd96bb69e24977a7cd5f67a2c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BasePhyLayer::getSimTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the current simulation time. 
<p>

<p>Implements <a class="el" href="a00057.html#73660771f127a990489fb04da07ea39e">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00729">729</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00729"></a>00729                                    {
<a name="l00730"></a>00730 
<a name="l00731"></a>00731   <span class="keywordflow">return</span> simTime();
<a name="l00732"></a>00732 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="116b328e70419037bb72e270c8d47bb9"></a><!-- doxytag: member="BasePhyLayer::getThermalNoise" ref="116b328e70419037bb72e270c8d47bb9" args="(simtime_t from, simtime_t to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00045.html">ConstMapping</a> * BasePhyLayer::getThermalNoise           </td>
          <td>(</td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>to</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a <a class="el" href="a00092.html" title="Represents a changeable mapping (mathematical function) from at least time to double...">Mapping</a> which defines the thermal noise in the passed time frame (in mW). 
<p>
The implementing class of this method keeps ownership of the <a class="el" href="a00092.html" title="Represents a changeable mapping (mathematical function) from at least time to double...">Mapping</a>.<p>
This implementation returns a constant mapping with the value of the "thermalNoise" module parameter<p>
Override this method if you want to define a more complex thermal noise. 
<p>Implements <a class="el" href="a00057.html#be550ca86568314b6dbcdc5d835f2178">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00703">703</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00371.html#l01235">SimpleConstMapping::initializeArguments()</a>, and <a class="el" href="a00358.html#l00075">thermalNoise</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00703"></a>00703                                                                         {
<a name="l00704"></a>00704   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>)
<a name="l00705"></a>00705     <a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>-&gt;<a class="code" href="a00126.html#17d3c5e8c98e7451a844d59c95c7272a" title="Initializes the key entry set with the passed position as entry.">initializeArguments</a>(<a class="code" href="a00003.html" title="Defines an argument for a mapping.">Argument</a>(from));
<a name="l00706"></a>00706 
<a name="l00707"></a>00707   <span class="keywordflow">return</span> <a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>;
<a name="l00708"></a>00708 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8d65e4a85336642f234bf0b1172336dc"></a><!-- doxytag: member="BasePhyLayer::handleAirFrame" ref="8d65e4a85336642f234bf0b1172336dc" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleAirFrame           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles messages received from the channel (probably AirFrames). 
<p>

<p>Reimplemented in <a class="el" href="a00110.html#d6bd7ad4b0180287c2556066ed067c65">PhyLayerBattery</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00320">320</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00134">END_RECEIVE</a>, <a class="el" href="a00357.html#l00404">handleAirFrameEndReceive()</a>, <a class="el" href="a00357.html#l00373">handleAirFrameReceiving()</a>, <a class="el" href="a00357.html#l00343">handleAirFrameStartReceive()</a>, <a class="el" href="a00358.html#l00132">RECEIVING</a>, and <a class="el" href="a00358.html#l00130">START_RECEIVE</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00295">handleMessage()</a>, and <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00320"></a>00320                                                {
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   AirFrame* frame = <span class="keyword">static_cast&lt;</span>AirFrame*<span class="keyword">&gt;</span>(msg);
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keywordflow">switch</span>(frame-&gt;getState()) {
<a name="l00325"></a>00325   <span class="keywordflow">case</span> <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc1a0cb17278ea70e7e327de30aad32e0a0" title="Start of actual receiving process of the AirFrame.">START_RECEIVE</a>:
<a name="l00326"></a>00326     <a class="code" href="a00021.html#671f083680882230b754b7e9578e6274" title="Handles incoming AirFrames with the state START_RECEIVE.">handleAirFrameStartReceive</a>(frame);
<a name="l00327"></a>00327     <span class="keywordflow">break</span>;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329   <span class="keywordflow">case</span> <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755" title="AirFrame is being received.">RECEIVING</a>: {
<a name="l00330"></a>00330     <a class="code" href="a00021.html#9dbbcf0004b22c622ec4b06a19b4f564" title="Handles incoming AirFrames with the state RECEIVING.">handleAirFrameReceiving</a>(frame);
<a name="l00331"></a>00331     <span class="keywordflow">break</span>;
<a name="l00332"></a>00332   }
<a name="l00333"></a>00333   <span class="keywordflow">case</span> <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>:
<a name="l00334"></a>00334     <a class="code" href="a00021.html#4f8fde562c0004b498fc3294c3f54c2f" title="Handles incoming AirFrames with the state END_RECEIVE.">handleAirFrameEndReceive</a>(frame);
<a name="l00335"></a>00335     <span class="keywordflow">break</span>;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keywordflow">default</span>:
<a name="l00338"></a>00338     opp_error( <span class="stringliteral">"Unknown AirFrame state: %s"</span>, frame-&gt;getState());
<a name="l00339"></a>00339     <span class="keywordflow">break</span>;
<a name="l00340"></a>00340   }
<a name="l00341"></a>00341 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4f8fde562c0004b498fc3294c3f54c2f"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameEndReceive" ref="4f8fde562c0004b498fc3294c3f54c2f" args="(AirFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleAirFrameEndReceive           </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles incoming AirFrames with the state END_RECEIVE. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00404">404</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00087">channelInfo</a>, <a class="el" href="a00377.html#l00451">Radio::cleanAnalogueModelUntil()</a>, <a class="el" href="a00343.html#l00040">coreEV</a>, <a class="el" href="a00360.html#l00274">ChannelInfo::getEarliestInfoPoint()</a>, <a class="el" href="a00358.html#l00090">radio</a>, and <a class="el" href="a00359.html#l00018">ChannelInfo::removeAirFrame()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00320">handleAirFrame()</a>, and <a class="el" href="a00357.html#l00373">handleAirFrameReceiving()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00404"></a>00404                                                            {
<a name="l00405"></a>00405   <a class="code" href="a00166.html#27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">"End of Airframe with ID "</span> &lt;&lt; frame-&gt;getId() &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; endl;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407   <a class="code" href="a00021.html#38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00035.html#f9ee0be843528ee913df218f73d4d713" title="Tells the ChannelInfo that an AirFrame is over.">removeAirFrame</a>(frame);
<a name="l00408"></a>00408 
<a name="l00409"></a>00409   <span class="comment">/* clean information in the radio until earliest time-point</span>
<a name="l00410"></a>00410 <span class="comment">  *  of information in the ChannelInfo,</span>
<a name="l00411"></a>00411 <span class="comment">  *  since this time-point might have changed due to removal of</span>
<a name="l00412"></a>00412 <span class="comment">  *  the AirFrame</span>
<a name="l00413"></a>00413 <span class="comment">  */</span>
<a name="l00414"></a>00414   <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#629c6360c5ae7608c37c5c46eae04f2c" title="discards information in the RadioStateAnalogueModel before given time-point">cleanAnalogueModelUntil</a>(<a class="code" href="a00021.html#38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00035.html#58f6c6cd7e2dbd61877c27076510ba21" title="Returns the current time-point from that information concerning AirFrames is needed...">getEarliestInfoPoint</a>());
<a name="l00415"></a>00415 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d0e987003f09275647a060e8a72cc5fa"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameFirstReceive" ref="d0e987003f09275647a060e8a72cc5fa" args="(AirFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleAirFrameFirstReceive           </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles incoming AirFrames with the state FIRST_RECEIVE. 
<p>

</div>
</div><p>
<a class="anchor" name="9dbbcf0004b22c622ec4b06a19b4f564"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameReceiving" ref="9dbbcf0004b22c622ec4b06a19b4f564" args="(AirFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleAirFrameReceiving           </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles incoming AirFrames with the state RECEIVING. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00373">373</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00343.html#l00040">coreEV</a>, <a class="el" href="a00358.html#l00093">decider</a>, <a class="el" href="a00358.html#l00134">END_RECEIVE</a>, <a class="el" href="a00378.html#l00115">Signal::getSignalLength()</a>, <a class="el" href="a00378.html#l00111">Signal::getSignalStart()</a>, <a class="el" href="a00357.html#l00404">handleAirFrameEndReceive()</a>, <a class="el" href="a00363.html#l00011">Decider::processSignal()</a>, and <a class="el" href="a00357.html#l00573">sendSelfMessage()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00320">handleAirFrame()</a>, and <a class="el" href="a00357.html#l00343">handleAirFrameStartReceive()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00373"></a>00373                                                           {
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <a class="code" href="a00124.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = frame-&gt;getSignal();
<a name="l00376"></a>00376   simtime_t nextHandleTime = <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>-&gt;<a class="code" href="a00052.html#2039d051f59054d39d4a5e0b38f25086" title="This function processes a AirFrame given by the PhyLayer and returns the time point...">processSignal</a>(frame);
<a name="l00377"></a>00377 
<a name="l00378"></a>00378   assert(signal.<a class="code" href="a00124.html#45626a4b652952d4b7d25b32164d417b" title="Returns the length of the signal transmission.">getSignalLength</a>() == frame-&gt;getDuration());
<a name="l00379"></a>00379   simtime_t signalEndTime = signal.<a class="code" href="a00124.html#67358914ffdd97d4c08c051e6849c500" title="Returns the point in time when the receiving of the Signal started.">getSignalStart</a>() + frame-&gt;getDuration();
<a name="l00380"></a>00380 
<a name="l00381"></a>00381   <span class="comment">//check if this is the end of the receiving process</span>
<a name="l00382"></a>00382   <span class="keywordflow">if</span>(simTime() &gt;= signalEndTime) {
<a name="l00383"></a>00383     frame-&gt;setState(<a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>);
<a name="l00384"></a>00384     <a class="code" href="a00021.html#4f8fde562c0004b498fc3294c3f54c2f" title="Handles incoming AirFrames with the state END_RECEIVE.">handleAirFrameEndReceive</a>(frame);
<a name="l00385"></a>00385     <span class="keywordflow">return</span>;
<a name="l00386"></a>00386   }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388   <span class="comment">//smaller zero means don't give it to me again</span>
<a name="l00389"></a>00389   <span class="keywordflow">if</span>(nextHandleTime &lt; 0) {
<a name="l00390"></a>00390     nextHandleTime = signalEndTime;
<a name="l00391"></a>00391     frame-&gt;setState(<a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>);
<a name="l00392"></a>00392 
<a name="l00393"></a>00393   <span class="comment">//invalid point in time</span>
<a name="l00394"></a>00394   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nextHandleTime &lt; simTime() || nextHandleTime &gt; signalEndTime) {
<a name="l00395"></a>00395     opp_error(<span class="stringliteral">"Invalid next handle time returned by Decider. Expected a value between current simulation time (%.2f) and end of signal (%.2f) but got %.2f"</span>,
<a name="l00396"></a>00396                 SIMTIME_DBL(simTime()), SIMTIME_DBL(signalEndTime), SIMTIME_DBL(nextHandleTime));
<a name="l00397"></a>00397   }
<a name="l00398"></a>00398 
<a name="l00399"></a>00399   <a class="code" href="a00166.html#27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">"Handed AirFrame with ID "</span> &lt;&lt; frame-&gt;getId() &lt;&lt; <span class="stringliteral">" to Decider. Next handling in "</span> &lt;&lt; nextHandleTime - simTime() &lt;&lt; <span class="stringliteral">"s."</span> &lt;&lt; endl;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <a class="code" href="a00021.html#7ac9dcc2ca7a8d140ddded4e9f1b37f0" title="Schedule self message to passed point in time.">sendSelfMessage</a>(frame, nextHandleTime);
<a name="l00402"></a>00402 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="671f083680882230b754b7e9578e6274"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameStartReceive" ref="671f083680882230b754b7e9578e6274" args="(AirFrame *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleAirFrameStartReceive           </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles incoming AirFrames with the state START_RECEIVE. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00343">343</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00359.html#l00006">ChannelInfo::addAirFrame()</a>, <a class="el" href="a00358.html#l00087">channelInfo</a>, <a class="el" href="a00343.html#l00040">coreEV</a>, <a class="el" href="a00358.html#l00093">decider</a>, <a class="el" href="a00358.html#l00134">END_RECEIVE</a>, <a class="el" href="a00357.html#l00581">filterSignal()</a>, <a class="el" href="a00378.html#l00111">Signal::getSignalStart()</a>, <a class="el" href="a00357.html#l00373">handleAirFrameReceiving()</a>, <a class="el" href="a00358.html#l00132">RECEIVING</a>, <a class="el" href="a00357.html#l00573">sendSelfMessage()</a>, <a class="el" href="a00378.html#l00123">Signal::setPropagationDelay()</a>, and <a class="el" href="a00322.html#l00068">ChannelAccess::usePropagationDelay</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00320">handleAirFrame()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00343"></a>00343                                                              {
<a name="l00344"></a>00344   <a class="code" href="a00166.html#27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">"Received new AirFrame with ID "</span> &lt;&lt; frame-&gt;getId() &lt;&lt; <span class="stringliteral">" from channel"</span> &lt;&lt; endl;
<a name="l00345"></a>00345   <a class="code" href="a00021.html#38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00035.html#8c18092fc5d4f4c9aa0d282e07b45eed" title="Tells the ChannelInfo that an AirFrame has started.">addAirFrame</a>(frame, simTime());
<a name="l00346"></a>00346 
<a name="l00347"></a>00347   <span class="keywordflow">if</span>(<a class="code" href="a00034.html#3f1ba5f7cfe15f458b91c8c318b50f33" title="Defines if the physical layer should simulate propagation delay.">usePropagationDelay</a>) {
<a name="l00348"></a>00348     <a class="code" href="a00124.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; s = frame-&gt;getSignal();
<a name="l00349"></a>00349     simtime_t delay = simTime() - s.<a class="code" href="a00124.html#67358914ffdd97d4c08c051e6849c500" title="Returns the point in time when the receiving of the Signal started.">getSignalStart</a>();
<a name="l00350"></a>00350     s.<a class="code" href="a00124.html#f934d43a057c096cd189c07f1ed1ff04" title="Sets the propagation delay of the signal.">setPropagationDelay</a>(delay);
<a name="l00351"></a>00351   }
<a name="l00352"></a>00352   assert(frame-&gt;getSignal().getSignalStart() == simTime());
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <a class="code" href="a00021.html#51940490b6927a6976b53b9f5c2178d4" title="Filters the passed Signal by every registered AnalogueModel.">filterSignal</a>(frame-&gt;getSignal());
<a name="l00355"></a>00355 
<a name="l00356"></a>00356   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>) {
<a name="l00357"></a>00357     frame-&gt;setState(<a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755" title="AirFrame is being received.">RECEIVING</a>);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="comment">//pass the AirFrame the first time to the Decider</span>
<a name="l00360"></a>00360     <a class="code" href="a00021.html#9dbbcf0004b22c622ec4b06a19b4f564" title="Handles incoming AirFrames with the state RECEIVING.">handleAirFrameReceiving</a>(frame);
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="comment">//if no decider is defined we will schedule the message directly to its end</span>
<a name="l00363"></a>00363   } <span class="keywordflow">else</span> {
<a name="l00364"></a>00364     <a class="code" href="a00124.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = frame-&gt;getSignal();
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     simtime_t signalEndTime = signal.<a class="code" href="a00124.html#67358914ffdd97d4c08c051e6849c500" title="Returns the point in time when the receiving of the Signal started.">getSignalStart</a>() + frame-&gt;getDuration();
<a name="l00367"></a>00367     frame-&gt;setState(<a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>);
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <a class="code" href="a00021.html#7ac9dcc2ca7a8d140ddded4e9f1b37f0" title="Schedule self message to passed point in time.">sendSelfMessage</a>(frame, signalEndTime);
<a name="l00370"></a>00370   }
<a name="l00371"></a>00371 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6866e3f79df84cdb5550a51d6502463f"></a><!-- doxytag: member="BasePhyLayer::handleChannelSenseRequest" ref="6866e3f79df84cdb5550a51d6502463f" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleChannelSenseRequest           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles reception of a ChannelSenseRequest by forwarding it to the decider and scheduling it to the point in time returned by the decider. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00499">499</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00093">decider</a>, <a class="el" href="a00363.html#l00021">Decider::handleChannelSenseRequest()</a>, and <a class="el" href="a00357.html#l00573">sendSelfMessage()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>, and <a class="el" href="a00357.html#l00516">handleUpperControlMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00499"></a>00499                                                           {
<a name="l00500"></a>00500   ChannelSenseRequest* senseReq = <span class="keyword">static_cast&lt;</span>ChannelSenseRequest*<span class="keyword">&gt;</span>(msg);
<a name="l00501"></a>00501 
<a name="l00502"></a>00502   simtime_t nextHandleTime = <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>-&gt;<a class="code" href="a00052.html#93548ff29f4d880ed488785509dd4dd9" title="This function is called by the PhyLayer to hand over a ChannelSenseRequest.">handleChannelSenseRequest</a>(senseReq);
<a name="l00503"></a>00503 
<a name="l00504"></a>00504   <span class="keywordflow">if</span>(nextHandleTime &gt;= simTime()) { <span class="comment">//schedule request for next handling</span>
<a name="l00505"></a>00505     <a class="code" href="a00021.html#7ac9dcc2ca7a8d140ddded4e9f1b37f0" title="Schedule self message to passed point in time.">sendSelfMessage</a>(msg, nextHandleTime);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nextHandleTime &gt;= 0.0){
<a name="l00508"></a>00508     opp_error(<span class="stringliteral">"Next handle time of ChannelSenseRequest returned by the Decider is smaller then current simulation time: %.2f"</span>,
<a name="l00509"></a>00509         SIMTIME_DBL(nextHandleTime));
<a name="l00510"></a>00510   }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512   <span class="comment">// else, i.e. nextHandleTime &lt; 0.0, the Decider doesn't want to handle</span>
<a name="l00513"></a>00513   <span class="comment">// the request again</span>
<a name="l00514"></a>00514 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3880154c8db8b8efb5315cb6ef8f6c41"></a><!-- doxytag: member="BasePhyLayer::handleMessage" ref="3880154c8db8b8efb5315cb6ef8f6c41" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OMNeT++ handle message function. 
<p>
Classify and forward message to subroutines.<ul>
<li>AirFrames from channel</li><li>self scheduled AirFrames</li><li>MacPackets from MAC layer</li><li>ControllMesasges from MAC layer</li><li>self messages like TX_OVER and RADIO_SWITCHED </li></ul>

<p>Reimplemented in <a class="el" href="a00123.html#ea91987fbece2dea329cf0a24dfa5450">SamplePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00295">295</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00368.html#l00028">MacToPhyInterface::AIR_FRAME</a>, <a class="el" href="a00357.html#l00320">handleAirFrame()</a>, <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>, <a class="el" href="a00357.html#l00516">handleUpperControlMessage()</a>, <a class="el" href="a00357.html#l00417">handleUpperMessage()</a>, <a class="el" href="a00358.html#l00114">upperControlIn</a>, and <a class="el" href="a00358.html#l00108">upperGateIn</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00295"></a>00295                                               {
<a name="l00296"></a>00296 
<a name="l00297"></a>00297   <span class="comment">//self messages</span>
<a name="l00298"></a>00298   <span class="keywordflow">if</span>(msg-&gt;isSelfMessage()) {
<a name="l00299"></a>00299     <a class="code" href="a00021.html#17088ad93f59e143ff6c7ba866a31982" title="Handles self scheduled messages.">handleSelfMessage</a>(msg);
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <span class="comment">//MacPkts &lt;- MacToPhyControlInfo</span>
<a name="l00302"></a>00302   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId() == <a class="code" href="a00021.html#31262af527f17ed1a41d70f616f2aa08" title="The id of the in-data gate from the Mac layer.">upperGateIn</a>) {
<a name="l00303"></a>00303     <a class="code" href="a00021.html#17b1d469775962d23835dd5f43a639ac" title="Handles messages received from the upper layer through the data gate.">handleUpperMessage</a>(msg);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   <span class="comment">//controlmessages</span>
<a name="l00306"></a>00306   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId() == <a class="code" href="a00021.html#b58c7430371f1ba135e0a641d150c1e3" title="The id of the in-control gate from the Mac layer.">upperControlIn</a>) {
<a name="l00307"></a>00307     <a class="code" href="a00021.html#4cab267d310b5fd6cefe613fc8dfe71d" title="Handles messages received from the upper layer through the control gate.">handleUpperControlMessage</a>(msg);
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="comment">//AirFrames</span>
<a name="l00310"></a>00310   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getKind() == <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a5296eafe94b4f472727793a10013af7671">AIR_FRAME</a>){
<a name="l00311"></a>00311     <a class="code" href="a00021.html#8d65e4a85336642f234bf0b1172336dc" title="Handles messages received from the channel (probably AirFrames).">handleAirFrame</a>(msg);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="comment">//unknown message</span>
<a name="l00314"></a>00314   } <span class="keywordflow">else</span> {
<a name="l00315"></a>00315     ev &lt;&lt; <span class="stringliteral">"Unknown message received."</span> &lt;&lt; endl;
<a name="l00316"></a>00316     <span class="keyword">delete</span> msg;
<a name="l00317"></a>00317   }
<a name="l00318"></a>00318 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="17088ad93f59e143ff6c7ba866a31982"></a><!-- doxytag: member="BasePhyLayer::handleSelfMessage" ref="17088ad93f59e143ff6c7ba866a31982" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleSelfMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles self scheduled messages. 
<p>

<p>Reimplemented in <a class="el" href="a00110.html#808fc8fc16c1bd4d2e865a6dc897ff4d">PhyLayerBattery</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00528">528</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00368.html#l00028">MacToPhyInterface::AIR_FRAME</a>, <a class="el" href="a00368.html#l00026">MacToPhyInterface::CHANNEL_SENSE_REQUEST</a>, <a class="el" href="a00357.html#l00657">finishRadioSwitching()</a>, <a class="el" href="a00357.html#l00320">handleAirFrame()</a>, <a class="el" href="a00357.html#l00499">handleChannelSenseRequest()</a>, <a class="el" href="a00368.html#l00024">MacToPhyInterface::RADIO_SWITCHING_OVER</a>, <a class="el" href="a00358.html#l00120">radioSwitchingOverTimer</a>, <a class="el" href="a00357.html#l00710">sendControlMsg()</a>, <a class="el" href="a00368.html#l00022">MacToPhyInterface::TX_OVER</a>, and <a class="el" href="a00358.html#l00126">txOverTimer</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00295">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00528"></a>00528                                                   {
<a name="l00529"></a>00529 
<a name="l00530"></a>00530   <span class="keywordflow">switch</span>(msg-&gt;getKind()) {
<a name="l00531"></a>00531   <span class="comment">//transmission over</span>
<a name="l00532"></a>00532   <span class="keywordflow">case</span> <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52b00e54021af4a33a84ac61a7543c7528">TX_OVER</a>:
<a name="l00533"></a>00533     assert(msg == <a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>);
<a name="l00534"></a>00534     <a class="code" href="a00021.html#62e88e82937e0ef2b9d4adf46061ec00" title="Called by the Decider to send a control message to the MACLayer.">sendControlMsg</a>(<span class="keyword">new</span> cMessage(<span class="stringliteral">"Transmission over"</span>, <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52b00e54021af4a33a84ac61a7543c7528">TX_OVER</a>));
<a name="l00535"></a>00535     <span class="keywordflow">break</span>;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537   <span class="comment">//radio switch over</span>
<a name="l00538"></a>00538   <span class="keywordflow">case</span> <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52876c7366bd2bcb675b41e60007831d06">RADIO_SWITCHING_OVER</a>:
<a name="l00539"></a>00539     assert(msg == <a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>);
<a name="l00540"></a>00540     <a class="code" href="a00021.html#da6c556e50ead146f822dadf6ea2a472" title="Called the moment the simulated switching process of the Radio is finished.">finishRadioSwitching</a>();
<a name="l00541"></a>00541     <span class="keywordflow">break</span>;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543   <span class="comment">//AirFrame</span>
<a name="l00544"></a>00544   <span class="keywordflow">case</span> <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a5296eafe94b4f472727793a10013af7671">AIR_FRAME</a>:
<a name="l00545"></a>00545     <a class="code" href="a00021.html#8d65e4a85336642f234bf0b1172336dc" title="Handles messages received from the channel (probably AirFrames).">handleAirFrame</a>(msg);
<a name="l00546"></a>00546     <span class="keywordflow">break</span>;
<a name="l00547"></a>00547 
<a name="l00548"></a>00548   <span class="comment">//ChannelSenseRequest</span>
<a name="l00549"></a>00549   <span class="keywordflow">case</span> <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52a6ff58f5815b155504d37339ee5c7222">CHANNEL_SENSE_REQUEST</a>:
<a name="l00550"></a>00550     <a class="code" href="a00021.html#6866e3f79df84cdb5550a51d6502463f" title="Handles reception of a ChannelSenseRequest by forwarding it to the decider and scheduling...">handleChannelSenseRequest</a>(msg);
<a name="l00551"></a>00551     <span class="keywordflow">break</span>;
<a name="l00552"></a>00552 
<a name="l00553"></a>00553   <span class="keywordflow">default</span>:
<a name="l00554"></a>00554     <span class="keywordflow">break</span>;
<a name="l00555"></a>00555   }
<a name="l00556"></a>00556 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4cab267d310b5fd6cefe613fc8dfe71d"></a><!-- doxytag: member="BasePhyLayer::handleUpperControlMessage" ref="4cab267d310b5fd6cefe613fc8dfe71d" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleUpperControlMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles messages received from the upper layer through the control gate. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00516">516</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00368.html#l00026">MacToPhyInterface::CHANNEL_SENSE_REQUEST</a>, and <a class="el" href="a00357.html#l00499">handleChannelSenseRequest()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00295">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00516"></a>00516                                                          {
<a name="l00517"></a>00517 
<a name="l00518"></a>00518   <span class="keywordflow">switch</span>(msg-&gt;getKind()) {
<a name="l00519"></a>00519   <span class="keywordflow">case</span> <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52a6ff58f5815b155504d37339ee5c7222">CHANNEL_SENSE_REQUEST</a>:
<a name="l00520"></a>00520     <a class="code" href="a00021.html#6866e3f79df84cdb5550a51d6502463f" title="Handles reception of a ChannelSenseRequest by forwarding it to the decider and scheduling...">handleChannelSenseRequest</a>(msg);
<a name="l00521"></a>00521     <span class="keywordflow">break</span>;
<a name="l00522"></a>00522   <span class="keywordflow">default</span>:
<a name="l00523"></a>00523     ev &lt;&lt; <span class="stringliteral">"Received unknown control message from upper layer!"</span> &lt;&lt; endl;
<a name="l00524"></a>00524     <span class="keywordflow">break</span>;
<a name="l00525"></a>00525   }
<a name="l00526"></a>00526 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="17b1d469775962d23835dd5f43a639ac"></a><!-- doxytag: member="BasePhyLayer::handleUpperMessage" ref="17b1d469775962d23835dd5f43a639ac" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleUpperMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles messages received from the upper layer through the data gate. 
<p>

<p>Reimplemented in <a class="el" href="a00110.html#73a5457ba5a50d2d061a4cbf7dbd96b3">PhyLayerBattery</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00417">417</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00357.html#l00448">encapsMsg()</a>, <a class="el" href="a00377.html#l00404">Radio::getCurrentState()</a>, <a class="el" href="a00358.html#l00090">radio</a>, <a class="el" href="a00357.html#l00568">sendMessageDown()</a>, <a class="el" href="a00357.html#l00573">sendSelfMessage()</a>, <a class="el" href="a00377.html#l00247">Radio::TX</a>, and <a class="el" href="a00358.html#l00126">txOverTimer</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00295">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00417"></a>00417                                                   {
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   <span class="comment">// check if Radio is in TX state</span>
<a name="l00420"></a>00420   <span class="keywordflow">if</span> (<a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#1c9dcb8d49198c04d9001732e8c4421e">getCurrentState</a>() != <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa55eab2480eb0876c6b76dc0df92882f7">Radio::TX</a>)
<a name="l00421"></a>00421   {
<a name="l00422"></a>00422         <span class="keyword">delete</span> msg;
<a name="l00423"></a>00423         msg = 0;
<a name="l00424"></a>00424     opp_error(<span class="stringliteral">"Error: message for sending received, but radio not in state TX"</span>);
<a name="l00425"></a>00425   }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427   <span class="comment">// check if not already sending</span>
<a name="l00428"></a>00428   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>-&gt;isScheduled())
<a name="l00429"></a>00429   {
<a name="l00430"></a>00430         <span class="keyword">delete</span> msg;
<a name="l00431"></a>00431         msg = 0;
<a name="l00432"></a>00432     opp_error(<span class="stringliteral">"Error: message for sending received, but radio already sending"</span>);
<a name="l00433"></a>00433   }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435   <span class="comment">// build the AirFrame to send</span>
<a name="l00436"></a>00436   assert(dynamic_cast&lt;cPacket*&gt;(msg) != 0);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   AirFrame* frame = <a class="code" href="a00021.html#1e42622259807fe3cf06935e7a818ccf" title="This function encapsulates messages from the upper layer into an AirFrame and sets...">encapsMsg</a>(static_cast&lt;cPacket*&gt;(msg));
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   <span class="comment">// make sure there is no self message of kind TX_OVER scheduled</span>
<a name="l00441"></a>00441   <span class="comment">// and schedule the actual one</span>
<a name="l00442"></a>00442   assert (!<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>-&gt;isScheduled());
<a name="l00443"></a>00443   <a class="code" href="a00021.html#7ac9dcc2ca7a8d140ddded4e9f1b37f0" title="Schedule self message to passed point in time.">sendSelfMessage</a>(<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>, simTime() + frame-&gt;getDuration());
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   <a class="code" href="a00021.html#1fe847ed3e50ccf3a3740234dfee42b1" title="Sends the passed AirFrame to the channel.">sendMessageDown</a>(frame);
<a name="l00446"></a>00446 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="08704deaf03b73c8eda67cc60e670853"></a><!-- doxytag: member="BasePhyLayer::initialize" ref="08704deaf03b73c8eda67cc60e670853" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::initialize           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OMNeT++ initialization function. Read simple parameters. Read and parse xml file for decider and analogue models configuration. 
<p>

<p>Reimplemented from <a class="el" href="a00034.html#f4c4d6652f6e3d4846cb3d2e826f4bed">ChannelAccess</a>.</p>

<p>Reimplemented in <a class="el" href="a00123.html#51d4997ab7973ee4b174ae49fb9b658f">SamplePhyLayer</a>, and <a class="el" href="a00110.html#815f95ad9fe89412ff3c5991ec1cfafe">PhyLayerBattery</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00031">31</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00397.html#l00141">FWMath::dBm2mW()</a>, <a class="el" href="a00358.html#l00138">headerLength</a>, <a class="el" href="a00357.html#l00213">initializeAnalogueModels()</a>, <a class="el" href="a00357.html#l00162">initializeDecider()</a>, <a class="el" href="a00358.html#l00078">maxTXPower</a>, <a class="el" href="a00358.html#l00090">radio</a>, <a class="el" href="a00368.html#l00024">MacToPhyInterface::RADIO_SWITCHING_OVER</a>, <a class="el" href="a00358.html#l00120">radioSwitchingOverTimer</a>, <a class="el" href="a00357.html#l00024">readPar()</a>, <a class="el" href="a00377.html#l00245">Radio::RX</a>, <a class="el" href="a00358.html#l00081">sensitivity</a>, <a class="el" href="a00377.html#l00385">Radio::setSwitchTime()</a>, <a class="el" href="a00377.html#l00249">Radio::SLEEP</a>, <a class="el" href="a00358.html#l00075">thermalNoise</a>, <a class="el" href="a00371.html#l00162">DimensionSet::timeDomain</a>, <a class="el" href="a00377.html#l00247">Radio::TX</a>, <a class="el" href="a00368.html#l00022">MacToPhyInterface::TX_OVER</a>, <a class="el" href="a00358.html#l00126">txOverTimer</a>, <a class="el" href="a00358.html#l00114">upperControlIn</a>, <a class="el" href="a00358.html#l00112">upperControlOut</a>, <a class="el" href="a00358.html#l00108">upperGateIn</a>, <a class="el" href="a00358.html#l00110">upperGateOut</a>, and <a class="el" href="a00358.html#l00141">world</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00031"></a>00031                                        {
<a name="l00032"></a>00032 
<a name="l00033"></a>00033   <a class="code" href="a00021.html#08704deaf03b73c8eda67cc60e670853" title="OMNeT++ initialization function. Read simple parameters. Read and parse xml file...">ChannelAccess::initialize</a>(stage);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035   <span class="keywordflow">if</span> (stage == 0) {
<a name="l00036"></a>00036     <span class="comment">// if using sendDirect, make sure that messages arrive without delay</span>
<a name="l00037"></a>00037     gate(<span class="stringliteral">"radioIn"</span>)-&gt;setDeliverOnReceptionStart(<span class="keyword">true</span>);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039     <span class="comment">//get gate ids</span>
<a name="l00040"></a>00040     <a class="code" href="a00021.html#31262af527f17ed1a41d70f616f2aa08" title="The id of the in-data gate from the Mac layer.">upperGateIn</a> = findGate(<span class="stringliteral">"upperGateIn"</span>);
<a name="l00041"></a>00041         <a class="code" href="a00021.html#0643f7dce4e8aa1b8490b11ba176a38a" title="The id of the out-data gate to the Mac layer.">upperGateOut</a> = findGate(<span class="stringliteral">"upperGateOut"</span>);
<a name="l00042"></a>00042         <a class="code" href="a00021.html#ca9b66970dd836cc696dd0907c58598b" title="The id of the out-control gate to the Mac layer.">upperControlOut</a> = findGate(<span class="stringliteral">"upperControlOut"</span>);
<a name="l00043"></a>00043         <a class="code" href="a00021.html#b58c7430371f1ba135e0a641d150c1e3" title="The id of the in-control gate from the Mac layer.">upperControlIn</a> = findGate(<span class="stringliteral">"upperControlIn"</span>);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="comment">//read simple ned-parameters</span>
<a name="l00046"></a>00046     <span class="comment">//  - initialize basic parameters</span>
<a name="l00047"></a>00047         <span class="keywordflow">if</span>(<a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"useThermalNoise"</span>, <span class="keyword">false</span>)) {
<a name="l00048"></a>00048       <span class="keywordtype">double</span> thermalNoiseVal = <a class="code" href="a00069.html#f308407856d9835b103f2421e373ee28">FWMath::dBm2mW</a>(<a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"thermalNoise"</span>, -999.0));
<a name="l00049"></a>00049       <a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a> = <span class="keyword">new</span> <a class="code" href="a00042.html" title="Represents a constant mathematical mapping (f(x) = c).">ConstantSimpleConstMapping</a>(<a class="code" href="a00061.html#bf3b99a319deca6efc123ec52d77d867" title="Shortcut to a DimensionSet which only contains time.">DimensionSet::timeDomain</a>,
<a name="l00050"></a>00050                               thermalNoiseVal);
<a name="l00051"></a>00051     } <span class="keywordflow">else</span> {
<a name="l00052"></a>00052       <a class="code" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a> = 0;
<a name="l00053"></a>00053     }
<a name="l00054"></a>00054         <a class="code" href="a00021.html#48f5fc0fe990ee5dbe31911437a586f9" title="Stores the length of the phy header in bits.">headerLength</a> = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"headerLength"</span>, 0);
<a name="l00055"></a>00055     <a class="code" href="a00021.html#7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a> = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"sensitivity"</span>, 0.0);
<a name="l00056"></a>00056     <a class="code" href="a00021.html#7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a> = <a class="code" href="a00069.html#f308407856d9835b103f2421e373ee28">FWMath::dBm2mW</a>(<a class="code" href="a00021.html#7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a>);
<a name="l00057"></a>00057     <a class="code" href="a00021.html#80fe7028b2fbf92f61dd30b79e30a86d" title="The maximum transmission power a message can be send with.">maxTXPower</a> = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"maxTXPower"</span>, 1.0);
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <span class="comment">//  - initialize radio</span>
<a name="l00060"></a>00060     <span class="keywordtype">int</span> initialRadioState = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"initalRadioState"</span>, (<span class="keywordtype">int</span>) <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1">Radio::RX</a>);
<a name="l00061"></a>00061     <span class="keywordtype">double</span> radioMinAtt = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"radioMinAtt"</span>, 1.0);
<a name="l00062"></a>00062     <span class="keywordtype">double</span> radioMaxAtt = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"radioMaxAtt"</span>, 0.0);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a> = <span class="keyword">new</span> <a class="code" href="a00112.html" title="The class that represents the Radio as a state machine.">Radio</a>(initialRadioState, radioMinAtt, radioMaxAtt);
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00067"></a>00067     <span class="comment">//  - switch times to TX</span>
<a name="l00068"></a>00068     simtime_t rxToTX = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeRXToTX"</span>, 0.0);
<a name="l00069"></a>00069     simtime_t sleepToTX = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeSleepToTX"</span>, 0.0);
<a name="l00070"></a>00070 
<a name="l00071"></a>00071     <span class="comment">//if no RX to TX defined asume same time as sleep to TX</span>
<a name="l00072"></a>00072     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#fcf12d0322d579b330a5a28d32ab8c5b" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1">Radio::RX</a>, <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa55eab2480eb0876c6b76dc0df92882f7">Radio::TX</a>, <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeRXToTX"</span>, sleepToTX));
<a name="l00073"></a>00073     <span class="comment">//if no sleep to TX defined asume same time as RX to TX</span>
<a name="l00074"></a>00074     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#fcf12d0322d579b330a5a28d32ab8c5b" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffac023b5b1d5d9ddbbff72007fb46449a7">Radio::SLEEP</a>, <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa55eab2480eb0876c6b76dc0df92882f7">Radio::TX</a>, <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeSleepToTX"</span>, rxToTX));
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="comment">//    - switch times to RX</span>
<a name="l00078"></a>00078     simtime_t txToRX = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeTXToRX"</span>, 0.0);
<a name="l00079"></a>00079     simtime_t sleepToRX = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeSleepToRX"</span>, 0.0);
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <span class="comment">//if no TX to RX defined asume same time as sleep to RX</span>
<a name="l00082"></a>00082     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#fcf12d0322d579b330a5a28d32ab8c5b" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa55eab2480eb0876c6b76dc0df92882f7">Radio::TX</a>, <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1">Radio::RX</a>, <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeTXToRX"</span>, sleepToRX));
<a name="l00083"></a>00083     <span class="comment">//if no sleep to RX defined asume same time as TX to RX</span>
<a name="l00084"></a>00084     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#fcf12d0322d579b330a5a28d32ab8c5b" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffac023b5b1d5d9ddbbff72007fb46449a7">Radio::SLEEP</a>, <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1">Radio::RX</a>, <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeSleepToRX"</span>, txToRX));
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="comment">//    - switch times to sleep</span>
<a name="l00088"></a>00088     simtime_t txToSleep = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeTXToSleep"</span>, 0.0);
<a name="l00089"></a>00089     simtime_t rxToSleep = <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeRXToSleep"</span>, 0.0);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="comment">//if no TX to sleep defined asume same time as RX to sleep</span>
<a name="l00092"></a>00092     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#fcf12d0322d579b330a5a28d32ab8c5b" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa55eab2480eb0876c6b76dc0df92882f7">Radio::TX</a>, <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffac023b5b1d5d9ddbbff72007fb46449a7">Radio::SLEEP</a>, <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeTXToSleep"</span>, rxToSleep));
<a name="l00093"></a>00093     <span class="comment">//if no RX to sleep defined asume same time as TX to sleep</span>
<a name="l00094"></a>00094     <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#fcf12d0322d579b330a5a28d32ab8c5b" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1">Radio::RX</a>, <a class="code" href="a00112.html#7314de88eaecfa054e682ccc84ef0ffac023b5b1d5d9ddbbff72007fb46449a7">Radio::SLEEP</a>, <a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"timeRXToSleep"</span>, txToSleep));
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     <span class="comment">// get pointer to the world module</span>
<a name="l00099"></a>00099     <a class="code" href="a00021.html#d1de573273df163a5fc2b8b537c65e23">world</a> = <a class="code" href="a00066.html" title="Provides method templates to find omnet modules.">FindModule&lt;BaseWorldUtility*&gt;::findGlobalModule</a>();
<a name="l00100"></a>00100         <span class="keywordflow">if</span> (<a class="code" href="a00021.html#d1de573273df163a5fc2b8b537c65e23">world</a> == NULL)
<a name="l00101"></a>00101             <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">"Could not find BaseWorldUtility module"</span>);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stage == 1){
<a name="l00104"></a>00104     <span class="comment">//read complex(xml) ned-parameters</span>
<a name="l00105"></a>00105     <span class="comment">//  - analogue model parameters</span>
<a name="l00106"></a>00106     <a class="code" href="a00021.html#8ea7353793eed2f1a7b0cd1caacd72e9" title="Initializes the AnalogueModels with the data from the passed XML-config data.">initializeAnalogueModels</a>(<a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"analogueModels"</span>, (cXMLElement*)0));
<a name="l00107"></a>00107     <span class="comment">//  - decider parameters</span>
<a name="l00108"></a>00108     <a class="code" href="a00021.html#9da4f8ffaa373a0de7895cbea524816b" title="Initializes the Decider with the data from the passed XML-config data.">initializeDecider</a>(<a class="code" href="a00021.html#1fb6d85cc9a8de0c1ff8393e1541f53e" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">"decider"</span>, (cXMLElement*)0));
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="comment">//initialise timer messages</span>
<a name="l00111"></a>00111     <a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">"radio switching over"</span>, <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52876c7366bd2bcb675b41e60007831d06">RADIO_SWITCHING_OVER</a>);
<a name="l00112"></a>00112     <a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">"transmission over"</span>, <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a52b00e54021af4a33a84ac61a7543c7528">TX_OVER</a>);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   }
<a name="l00115"></a>00115 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8ea7353793eed2f1a7b0cd1caacd72e9"></a><!-- doxytag: member="BasePhyLayer::initializeAnalogueModels" ref="8ea7353793eed2f1a7b0cd1caacd72e9" args="(cXMLElement *xmlConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::initializeAnalogueModels           </td>
          <td>(</td>
          <td class="paramtype">cXMLElement *&nbsp;</td>
          <td class="paramname"> <em>xmlConfig</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the AnalogueModels with the data from the passed XML-config data. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00213">213</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00099">analogueModels</a>, <a class="el" href="a00343.html#l00040">coreEV</a>, <a class="el" href="a00357.html#l00278">getAnalogueModelFromName()</a>, and <a class="el" href="a00357.html#l00117">getParametersFromXML()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00213"></a>00213                                                                   {
<a name="l00214"></a>00214 
<a name="l00215"></a>00215   <span class="comment">/*</span>
<a name="l00216"></a>00216 <span class="comment">  * first of all, attach the AnalogueModel that represents the RadioState</span>
<a name="l00217"></a>00217 <span class="comment">  * to the AnalogueModelList as first element.</span>
<a name="l00218"></a>00218 <span class="comment">  */</span>
<a name="l00219"></a>00219   std::string s(<span class="stringliteral">"RadioStateAnalogueModel"</span>);
<a name="l00220"></a>00220   <a class="code" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0" title="Used at initialisation to pass the parameters to the AnalogueModel and Decider.">ParameterMap</a> p;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <a class="code" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>* newAnalogueModel = <a class="code" href="a00021.html#419df7f53684ee758de1dcabb959e10f" title="Creates and returns an instance of the AnalogueModel with the specified name.">getAnalogueModelFromName</a>(s, p);
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="keywordflow">if</span>(newAnalogueModel == 0)
<a name="l00225"></a>00225   {
<a name="l00226"></a>00226     opp_warning(<span class="stringliteral">"Could not find an analogue model with the name \"%s\"."</span>, s.c_str());
<a name="l00227"></a>00227   }
<a name="l00228"></a>00228   <a class="code" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.push_back(newAnalogueModel);
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <span class="keywordflow">if</span>(xmlConfig == 0) {
<a name="l00232"></a>00232     opp_warning(<span class="stringliteral">"No analogue models configuration file specified."</span>);
<a name="l00233"></a>00233     <span class="keywordflow">return</span>;
<a name="l00234"></a>00234   }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   cXMLElementList analogueModelList = xmlConfig-&gt;getElementsByTagName(<span class="stringliteral">"AnalogueModel"</span>);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="keywordflow">if</span>(analogueModelList.empty()) {
<a name="l00239"></a>00239     opp_warning(<span class="stringliteral">"No analogue models configuration found in configuration file."</span>);
<a name="l00240"></a>00240     <span class="keywordflow">return</span>;
<a name="l00241"></a>00241   }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243   <span class="comment">// iterate over all AnalogueModel-entries, get a new AnalogueModel instance and add</span>
<a name="l00244"></a>00244   <span class="comment">// it to analogueModels</span>
<a name="l00245"></a>00245   <span class="keywordflow">for</span>(cXMLElementList::const_iterator it = analogueModelList.begin();
<a name="l00246"></a>00246     it != analogueModelList.end(); it++) {
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     cXMLElement* analogueModelData = *it;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     <span class="keyword">const</span> <span class="keywordtype">char</span>* name = analogueModelData-&gt;getAttribute(<span class="stringliteral">"type"</span>);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="keywordflow">if</span>(name == 0) {
<a name="l00254"></a>00254       opp_warning(<span class="stringliteral">"Could not read name of analogue model."</span>);
<a name="l00255"></a>00255       <span class="keywordflow">continue</span>;
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <a class="code" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0" title="Used at initialisation to pass the parameters to the AnalogueModel and Decider.">ParameterMap</a> params;
<a name="l00259"></a>00259     <a class="code" href="a00021.html#a89a9272b99ab3005347301c2effc254" title="Utility function. Reads the parameters of a XML element and stores them in the passed...">getParametersFromXML</a>(analogueModelData, params);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <a class="code" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>* newAnalogueModel = <a class="code" href="a00021.html#419df7f53684ee758de1dcabb959e10f" title="Creates and returns an instance of the AnalogueModel with the specified name.">getAnalogueModelFromName</a>(name, params);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="keywordflow">if</span>(newAnalogueModel == 0) {
<a name="l00264"></a>00264       opp_warning(<span class="stringliteral">"Could not find an analogue model with the name \"%s\"."</span>, name);
<a name="l00265"></a>00265       <span class="keywordflow">continue</span>;
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     <span class="comment">// attach the new AnalogueModel to the AnalogueModelList</span>
<a name="l00269"></a>00269     <a class="code" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.push_back(newAnalogueModel);
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     <a class="code" href="a00166.html#27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">"AnalogueModel \""</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">"\" loaded."</span> &lt;&lt; endl;
<a name="l00272"></a>00272 
<a name="l00273"></a>00273   } <span class="comment">// end iterator loop</span>
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9da4f8ffaa373a0de7895cbea524816b"></a><!-- doxytag: member="BasePhyLayer::initializeDecider" ref="9da4f8ffaa373a0de7895cbea524816b" args="(cXMLElement *xmlConfig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::initializeDecider           </td>
          <td>(</td>
          <td class="paramtype">cXMLElement *&nbsp;</td>
          <td class="paramname"> <em>xmlConfig</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> with the data from the passed XML-config data. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00162">162</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00343.html#l00040">coreEV</a>, <a class="el" href="a00358.html#l00093">decider</a>, <a class="el" href="a00357.html#l00205">getDeciderFromName()</a>, and <a class="el" href="a00357.html#l00117">getParametersFromXML()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00162"></a>00162                                                            {
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a> = 0;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <span class="keywordflow">if</span>(xmlConfig == 0) {
<a name="l00167"></a>00167     opp_error(<span class="stringliteral">"No decider configuration file specified."</span>);
<a name="l00168"></a>00168     <span class="keywordflow">return</span>;
<a name="l00169"></a>00169   }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   cXMLElementList deciderList = xmlConfig-&gt;getElementsByTagName(<span class="stringliteral">"Decider"</span>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordflow">if</span>(deciderList.empty()) {
<a name="l00174"></a>00174     opp_error(<span class="stringliteral">"No decider configuration found in configuration file."</span>);
<a name="l00175"></a>00175     <span class="keywordflow">return</span>;
<a name="l00176"></a>00176   }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <span class="keywordflow">if</span>(deciderList.size() &gt; 1) {
<a name="l00179"></a>00179     opp_error(<span class="stringliteral">"More than one decider configuration found in configuration file."</span>);
<a name="l00180"></a>00180     <span class="keywordflow">return</span>;
<a name="l00181"></a>00181   }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183   cXMLElement* deciderData = deciderList.front();
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   <span class="keyword">const</span> <span class="keywordtype">char</span>* name = deciderData-&gt;getAttribute(<span class="stringliteral">"type"</span>);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187   <span class="keywordflow">if</span>(name == 0) {
<a name="l00188"></a>00188     opp_error(<span class="stringliteral">"Could not read type of decider from configuration file."</span>);
<a name="l00189"></a>00189     <span class="keywordflow">return</span>;
<a name="l00190"></a>00190   }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <a class="code" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0" title="Used at initialisation to pass the parameters to the AnalogueModel and Decider.">ParameterMap</a> params;
<a name="l00193"></a>00193   <a class="code" href="a00021.html#a89a9272b99ab3005347301c2effc254" title="Utility function. Reads the parameters of a XML element and stores them in the passed...">getParametersFromXML</a>(deciderData, params);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195   <a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a> = <a class="code" href="a00021.html#095d1b5fd25b9ada3ac86d3c9237c3f8" title="Creates and returns an instance of the Decider with the specified name.">getDeciderFromName</a>(name, params);
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a> == 0) {
<a name="l00198"></a>00198     opp_error(<span class="stringliteral">"Could not find a decider with the name \"%s\"."</span>, name);
<a name="l00199"></a>00199     <span class="keywordflow">return</span>;
<a name="l00200"></a>00200   }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <a class="code" href="a00166.html#27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">"Decider \""</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">"\" loaded."</span> &lt;&lt; endl;
<a name="l00203"></a>00203 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1fb6d85cc9a8de0c1ff8393e1541f53e"></a><!-- doxytag: member="BasePhyLayer::readPar" ref="1fb6d85cc9a8de0c1ff8393e1541f53e" args="(const char *parName, const T defaultValue)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T BasePhyLayer::readPar           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>parName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T&nbsp;</td>
          <td class="paramname"> <em>defaultValue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads and returns the parameter with the passed name. 
<p>
If the parameter couldn't be found the value of defaultValue is returned.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parName</em>&nbsp;</td><td>- the name of the ned-parameter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>defaultValue</em>&nbsp;</td><td>- the value to be returned if the parameter couldn't be found </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00357.html#l00024">24</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00024"></a>00024                                                                                   {
<a name="l00025"></a>00025   <span class="keywordflow">if</span>(hasPar(parName))
<a name="l00026"></a>00026     <span class="keywordflow">return</span> par(parName);
<a name="l00027"></a>00027   <span class="keywordflow">else</span>
<a name="l00028"></a>00028     <span class="keywordflow">return</span> defaultValue;
<a name="l00029"></a>00029 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="aa439e85a8bc20a39477055aecf04993"></a><!-- doxytag: member="BasePhyLayer::sendControlMessageUp" ref="aa439e85a8bc20a39477055aecf04993" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendControlMessageUp           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends the passed control message to the upper layer. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00560">560</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00112">upperControlOut</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00710">sendControlMsg()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00560"></a>00560                                                      {
<a name="l00561"></a>00561   send(msg, <a class="code" href="a00021.html#ca9b66970dd836cc696dd0907c58598b" title="The id of the out-control gate to the Mac layer.">upperControlOut</a>);
<a name="l00562"></a>00562 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="62e88e82937e0ef2b9d4adf46061ec00"></a><!-- doxytag: member="BasePhyLayer::sendControlMsg" ref="62e88e82937e0ef2b9d4adf46061ec00" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendControlMsg           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> to send a control message to the MACLayer. 
<p>
This function can be used to answer a ChannelSenseRequest to the MACLayer 
<p>Implements <a class="el" href="a00057.html#14d6506f37de87b057084c01295d5e8c">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00710">710</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00357.html#l00560">sendControlMessageUp()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00657">finishRadioSwitching()</a>, and <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00710"></a>00710                                                {
<a name="l00711"></a>00711   <a class="code" href="a00021.html#aa439e85a8bc20a39477055aecf04993" title="Sends the passed control message to the upper layer.">sendControlMessageUp</a>(msg);
<a name="l00712"></a>00712 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f5ac9665c3f3eaee7846ef0ba141b858"></a><!-- doxytag: member="BasePhyLayer::sendMacPktUp" ref="f5ac9665c3f3eaee7846ef0ba141b858" args="(cMessage *pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendMacPktUp           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>pkt</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends the passed MacPkt to the upper layer. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00564">564</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00358.html#l00110">upperGateOut</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00714">sendUp()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00564"></a>00564                                              {
<a name="l00565"></a>00565   send(pkt, <a class="code" href="a00021.html#0643f7dce4e8aa1b8490b11ba176a38a" title="The id of the out-data gate to the Mac layer.">upperGateOut</a>);
<a name="l00566"></a>00566 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1fe847ed3e50ccf3a3740234dfee42b1"></a><!-- doxytag: member="BasePhyLayer::sendMessageDown" ref="1fe847ed3e50ccf3a3740234dfee42b1" args="(AirFrame *pkt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendMessageDown           </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>pkt</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends the passed AirFrame to the channel. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00568">568</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00321.html#l00077">ChannelAccess::sendToChannel()</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00417">handleUpperMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00568"></a>00568                                                 {
<a name="l00569"></a>00569 
<a name="l00570"></a>00570   <a class="code" href="a00034.html#e370934ad7b1feacc1cb6bd6ad437198" title="Sends a message to all nics connected to this one.">sendToChannel</a>(msg);
<a name="l00571"></a>00571 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7ac9dcc2ca7a8d140ddded4e9f1b37f0"></a><!-- doxytag: member="BasePhyLayer::sendSelfMessage" ref="7ac9dcc2ca7a8d140ddded4e9f1b37f0" args="(cMessage *msg, simtime_t time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendSelfMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Schedule self message to passed point in time. 
<p>

<p>Definition at line <a class="el" href="a00357.html#l00573">573</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00373">handleAirFrameReceiving()</a>, <a class="el" href="a00357.html#l00343">handleAirFrameStartReceive()</a>, <a class="el" href="a00357.html#l00499">handleChannelSenseRequest()</a>, <a class="el" href="a00357.html#l00417">handleUpperMessage()</a>, and <a class="el" href="a00357.html#l00663">setRadioState()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00573"></a>00573                                                                 {
<a name="l00574"></a>00574   <span class="comment">//TODO: maybe delete this method because it doesn't makes much sense,</span>
<a name="l00575"></a>00575   <span class="comment">//    or change it to "scheduleIn(msg, timeDelta)" which schedules</span>
<a name="l00576"></a>00576   <span class="comment">//    a message to +timeDelta from current time</span>
<a name="l00577"></a>00577   scheduleAt(time, msg);
<a name="l00578"></a>00578 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0e9f0ccf4ed1d8377aa3f00b931a3e71"></a><!-- doxytag: member="BasePhyLayer::sendUp" ref="0e9f0ccf4ed1d8377aa3f00b931a3e71" args="(AirFrame *packet, DeciderResult *result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendUp           </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00055.html">DeciderResult</a> *&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called to send an AirFrame with <a class="el" href="a00055.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a> to the MACLayer. 
<p>
When a packet is completely received and not noise, the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> call this function to send the packet together with the corresponding <a class="el" href="a00055.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a> up to MACLayer 
<p>Implements <a class="el" href="a00057.html#3c0676323e402449d0972890c6a14df3">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00714">714</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00343.html#l00040">coreEV</a>, and <a class="el" href="a00357.html#l00564">sendMacPktUp()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00714"></a>00714                                                                 {
<a name="l00715"></a>00715 
<a name="l00716"></a>00716   <a class="code" href="a00166.html#27f667d27591f62ecf86a99a79ea8f42">coreEV</a> &lt;&lt; <span class="stringliteral">"Decapsulating MacPacket from Airframe with ID "</span> &lt;&lt; frame-&gt;getId() &lt;&lt; <span class="stringliteral">" and sending it up to MAC."</span> &lt;&lt; endl;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718   cMessage* packet = frame-&gt;decapsulate();
<a name="l00719"></a>00719 
<a name="l00720"></a>00720   assert(packet);
<a name="l00721"></a>00721 
<a name="l00722"></a>00722   <a class="code" href="a00111.html" title="Controlinfo for packets which are send from Physical layer to the MAC layer.">PhyToMacControlInfo</a>* ctrlInfo = <span class="keyword">new</span> <a class="code" href="a00111.html" title="Controlinfo for packets which are send from Physical layer to the MAC layer.">PhyToMacControlInfo</a>(result);
<a name="l00723"></a>00723 
<a name="l00724"></a>00724   packet-&gt;setControlInfo(ctrlInfo);
<a name="l00725"></a>00725 
<a name="l00726"></a>00726   <a class="code" href="a00021.html#f5ac9665c3f3eaee7846ef0ba141b858" title="Sends the passed MacPkt to the upper layer.">sendMacPktUp</a>(packet);
<a name="l00727"></a>00727 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5170b3aadae25dc6b9e61974076be04b"></a><!-- doxytag: member="BasePhyLayer::setRadioState" ref="5170b3aadae25dc6b9e61974076be04b" args="(int rs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BasePhyLayer::setRadioState           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rs</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tells the <a class="el" href="a00021.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> to switch to the specified radio state. 
<p>
The switching process can take some time depending on the specified switching times in the ned file.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>-1: Error code if the <a class="el" href="a00112.html" title="The class that represents the Radio as a state machine.">Radio</a> is currently switching else: switching time from the current RadioState to the new RadioState </dd></dl>

<p>Implements <a class="el" href="a00090.html#d25abbad9aa16bdbf24bf1dd582b1c6f">MacToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00357.html#l00663">663</a> of file <a class="el" href="a00357.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00357.html#l00657">finishRadioSwitching()</a>, <a class="el" href="a00358.html#l00090">radio</a>, <a class="el" href="a00358.html#l00120">radioSwitchingOverTimer</a>, <a class="el" href="a00357.html#l00573">sendSelfMessage()</a>, <a class="el" href="a00377.html#l00349">Radio::switchTo()</a>, and <a class="el" href="a00358.html#l00126">txOverTimer</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00663"></a>00663                                             {
<a name="l00664"></a>00664   Enter_Method_Silent();
<a name="l00665"></a>00665   assert(<a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>);
<a name="l00666"></a>00666 
<a name="l00667"></a>00667   <span class="keywordflow">if</span>(<a class="code" href="a00021.html#2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>-&gt;isScheduled()) {
<a name="l00668"></a>00668     opp_warning(<span class="stringliteral">"Switched radio while sending an AirFrame. The effects this would have on the transmission are not simulated by the BasePhyLayer!"</span>);
<a name="l00669"></a>00669   }
<a name="l00670"></a>00670 
<a name="l00671"></a>00671   simtime_t switchTime = <a class="code" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00112.html#615c12ca30bd915fd030c5fa1a81d0c8" title="A function called by the Physical Layer to start the switching process to a new RadioState...">switchTo</a>(rs, simTime());
<a name="l00672"></a>00672 
<a name="l00673"></a>00673   <span class="comment">//invalid switch time, we are probably already switching</span>
<a name="l00674"></a>00674   <span class="keywordflow">if</span>(switchTime &lt; 0)
<a name="l00675"></a>00675     <span class="keywordflow">return</span> switchTime;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677   <span class="comment">// if switching is done in exactly zero-time no extra self-message is scheduled</span>
<a name="l00678"></a>00678   <span class="keywordflow">if</span> (switchTime == 0.0)
<a name="l00679"></a>00679   {
<a name="l00680"></a>00680     <span class="comment">// TODO: in case of zero-time-switch, send no control-message to mac!</span>
<a name="l00681"></a>00681     <span class="comment">// maybe call a method finishRadioSwitchingSilent()</span>
<a name="l00682"></a>00682     <a class="code" href="a00021.html#da6c556e50ead146f822dadf6ea2a472" title="Called the moment the simulated switching process of the Radio is finished.">finishRadioSwitching</a>();
<a name="l00683"></a>00683   } <span class="keywordflow">else</span>
<a name="l00684"></a>00684   {
<a name="l00685"></a>00685     <a class="code" href="a00021.html#7ac9dcc2ca7a8d140ddded4e9f1b37f0" title="Schedule self message to passed point in time.">sendSelfMessage</a>(<a class="code" href="a00021.html#c28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>, simTime() + switchTime);
<a name="l00686"></a>00686   }
<a name="l00687"></a>00687 
<a name="l00688"></a>00688   <span class="keywordflow">return</span> switchTime;
<a name="l00689"></a>00689 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="bc00fc5777ef641f72b5a4d85bf65c93"></a><!-- doxytag: member="BasePhyLayer::analogueModels" ref="bc00fc5777ef641f72b5a4d85bf65c93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#c8dca20c727bdb1494d97da1c64bb55d">AnalogueModelList</a> <a class="el" href="a00021.html#bc00fc5777ef641f72b5a4d85bf65c93">BasePhyLayer::analogueModels</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
List of the analogue models to use. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00099">99</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00581">filterSignal()</a>, <a class="el" href="a00357.html#l00213">initializeAnalogueModels()</a>, and <a class="el" href="a00357.html#l00592">~BasePhyLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="38d35bc99079eff49deb6c870b1175e7"></a><!-- doxytag: member="BasePhyLayer::channelInfo" ref="38d35bc99079eff49deb6c870b1175e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00035.html">ChannelInfo</a> <a class="el" href="a00021.html#38d35bc99079eff49deb6c870b1175e7">BasePhyLayer::channelInfo</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Channel info keeps track of received AirFrames and provides information about currently active AirFrames at the channel. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00087">87</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00699">getChannelInfo()</a>, <a class="el" href="a00357.html#l00404">handleAirFrameEndReceive()</a>, and <a class="el" href="a00357.html#l00343">handleAirFrameStartReceive()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5be00b3a133596d8ed78a9f8e38973d4"></a><!-- doxytag: member="BasePhyLayer::decider" ref="5be00b3a133596d8ed78a9f8e38973d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00052.html">Decider</a>* <a class="el" href="a00021.html#5be00b3a133596d8ed78a9f8e38973d4">BasePhyLayer::decider</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the decider module. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00093">93</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00691">getChannelState()</a>, <a class="el" href="a00357.html#l00373">handleAirFrameReceiving()</a>, <a class="el" href="a00357.html#l00343">handleAirFrameStartReceive()</a>, <a class="el" href="a00357.html#l00499">handleChannelSenseRequest()</a>, <a class="el" href="a00357.html#l00162">initializeDecider()</a>, and <a class="el" href="a00357.html#l00592">~BasePhyLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="48f5fc0fe990ee5dbe31911437a586f9"></a><!-- doxytag: member="BasePhyLayer::headerLength" ref="48f5fc0fe990ee5dbe31911437a586f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00021.html#48f5fc0fe990ee5dbe31911437a586f9">BasePhyLayer::headerLength</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Stores the length of the phy header in bits. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00138">138</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00448">encapsMsg()</a>, and <a class="el" href="a00357.html#l00031">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="80fe7028b2fbf92f61dd30b79e30a86d"></a><!-- doxytag: member="BasePhyLayer::maxTXPower" ref="80fe7028b2fbf92f61dd30b79e30a86d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="a00021.html#80fe7028b2fbf92f61dd30b79e30a86d">BasePhyLayer::maxTXPower</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The maximum transmission power a message can be send with. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00078">78</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6aefa7200582ec18d6ac5f8f8092a166"></a><!-- doxytag: member="BasePhyLayer::radio" ref="6aefa7200582ec18d6ac5f8f8092a166" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00112.html">Radio</a>* <a class="el" href="a00021.html#6aefa7200582ec18d6ac5f8f8092a166">BasePhyLayer::radio</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The state machine storing the current radio state (TX, RX, SLEEP). 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00090">90</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00657">finishRadioSwitching()</a>, <a class="el" href="a00357.html#l00278">getAnalogueModelFromName()</a>, <a class="el" href="a00357.html#l00651">getRadioState()</a>, <a class="el" href="a00357.html#l00404">handleAirFrameEndReceive()</a>, <a class="el" href="a00357.html#l00417">handleUpperMessage()</a>, <a class="el" href="a00357.html#l00031">initialize()</a>, <a class="el" href="a00357.html#l00663">setRadioState()</a>, and <a class="el" href="a00357.html#l00592">~BasePhyLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c28de586b21162c377a180233299a1d5"></a><!-- doxytag: member="BasePhyLayer::radioSwitchingOverTimer" ref="c28de586b21162c377a180233299a1d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="a00021.html#c28de586b21162c377a180233299a1d5">BasePhyLayer::radioSwitchingOverTimer</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Self message scheduled to the point in time when the switching process of the radio is over. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00120">120</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>, <a class="el" href="a00357.html#l00031">initialize()</a>, <a class="el" href="a00357.html#l00663">setRadioState()</a>, and <a class="el" href="a00357.html#l00592">~BasePhyLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7eaa041636b623066b5abd87a38afa25"></a><!-- doxytag: member="BasePhyLayer::sensitivity" ref="7eaa041636b623066b5abd87a38afa25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="a00021.html#7eaa041636b623066b5abd87a38afa25">BasePhyLayer::sensitivity</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The sensitivity describes the minimum strength a signal must have to be received. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00081">81</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>, <a class="el" href="a00463.html#l00147">PhyLayer::initializeDecider80211()</a>, <a class="el" href="a00465.html#l00050">PhyLayerBattery::initializeDecider80211Battery()</a>, and <a class="el" href="a00463.html#l00153">PhyLayer::initializeSNRThresholdDecider()</a>.</p>

</div>
</div><p>
<a class="anchor" name="fedc2cd6f80601fb040b56256e6cc756"></a><!-- doxytag: member="BasePhyLayer::thermalNoise" ref="fedc2cd6f80601fb040b56256e6cc756" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00042.html">ConstantSimpleConstMapping</a>* <a class="el" href="a00021.html#fedc2cd6f80601fb040b56256e6cc756">BasePhyLayer::thermalNoise</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Defines the strength of the thermal noise. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00075">75</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00703">getThermalNoise()</a>, <a class="el" href="a00357.html#l00031">initialize()</a>, and <a class="el" href="a00357.html#l00592">~BasePhyLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2ce22bc20ab469e99352958face5468d"></a><!-- doxytag: member="BasePhyLayer::txOverTimer" ref="2ce22bc20ab469e99352958face5468d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="a00021.html#2ce22bc20ab469e99352958face5468d">BasePhyLayer::txOverTimer</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Self message scheduled to the point in time when the transmission of an AirFrame is over. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00126">126</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00528">handleSelfMessage()</a>, <a class="el" href="a00357.html#l00417">handleUpperMessage()</a>, <a class="el" href="a00357.html#l00031">initialize()</a>, <a class="el" href="a00357.html#l00663">setRadioState()</a>, and <a class="el" href="a00357.html#l00592">~BasePhyLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b58c7430371f1ba135e0a641d150c1e3"></a><!-- doxytag: member="BasePhyLayer::upperControlIn" ref="b58c7430371f1ba135e0a641d150c1e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00021.html#b58c7430371f1ba135e0a641d150c1e3">BasePhyLayer::upperControlIn</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The id of the in-control gate from the Mac layer. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00114">114</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00295">handleMessage()</a>, and <a class="el" href="a00357.html#l00031">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ca9b66970dd836cc696dd0907c58598b"></a><!-- doxytag: member="BasePhyLayer::upperControlOut" ref="ca9b66970dd836cc696dd0907c58598b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00021.html#ca9b66970dd836cc696dd0907c58598b">BasePhyLayer::upperControlOut</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The id of the out-control gate to the Mac layer. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00112">112</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>, and <a class="el" href="a00357.html#l00560">sendControlMessageUp()</a>.</p>

</div>
</div><p>
<a class="anchor" name="31262af527f17ed1a41d70f616f2aa08"></a><!-- doxytag: member="BasePhyLayer::upperGateIn" ref="31262af527f17ed1a41d70f616f2aa08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00021.html#31262af527f17ed1a41d70f616f2aa08">BasePhyLayer::upperGateIn</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The id of the in-data gate from the Mac layer. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00108">108</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00295">handleMessage()</a>, and <a class="el" href="a00357.html#l00031">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0643f7dce4e8aa1b8490b11ba176a38a"></a><!-- doxytag: member="BasePhyLayer::upperGateOut" ref="0643f7dce4e8aa1b8490b11ba176a38a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00021.html#0643f7dce4e8aa1b8490b11ba176a38a">BasePhyLayer::upperGateOut</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The id of the out-data gate to the Mac layer. 
<p>

<p>Definition at line <a class="el" href="a00358.html#l00110">110</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00031">initialize()</a>, and <a class="el" href="a00357.html#l00564">sendMacPktUp()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d1de573273df163a5fc2b8b537c65e23"></a><!-- doxytag: member="BasePhyLayer::world" ref="d1de573273df163a5fc2b8b537c65e23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00024.html">BaseWorldUtility</a>* <a class="el" href="a00021.html#d1de573273df163a5fc2b8b537c65e23">BasePhyLayer::world</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Reimplemented from <a class="el" href="a00034.html#4ea6b1d6aaceaffec8682eb8f0ff2969">ChannelAccess</a>.</p>

<p>Definition at line <a class="el" href="a00358.html#l00141">141</a> of file <a class="el" href="a00358.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00357.html#l00448">encapsMsg()</a>, <a class="el" href="a00357.html#l00031">initialize()</a>, and <a class="el" href="a00463.html#l00060">PhyLayer::initializeSimplePathlossModel()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>base/phyLayer/<a class="el" href="a00358.html">BasePhyLayer.h</a><li>base/phyLayer/<a class="el" href="a00357.html">BasePhyLayer.cc</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 28 15:56:59 2009 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
