<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MiXiM: SamplePhyLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SamplePhyLayer Class Reference<br>
<small>
[<a class="el" href="a00303.html">phyLayer - physical layer modules</a>,&nbsp;<a class="el" href="a00316.html">AnalogueModels example - Classes from the AnalogueModels example</a>]</small>
</h1><!-- doxytag: class="SamplePhyLayer" --><!-- doxytag: inherits="PhyLayer" -->Simple <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> sub class which is just responsible for creating and initialising its own AnalogueModels and <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="a00414.html">SamplePhyLayer.h</a>&gt;</code>
<p>
Inherits <a class="el" href="a00109.html">PhyLayer</a>.
<p>
<div class="dynheader">
Collaboration diagram for SamplePhyLayer:</div>
<div class="dynsection">
<p><center><img src="a01034.png" border="0" usemap="#a01035" alt="Collaboration graph"></center>
<map name="a01035">
<area shape="rect" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory..." alt="" coords="28,5,103,32"></map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="a01036.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#51d4997ab7973ee4b174ae49fb9b658f">initialize</a> (int stage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OMNeT++ initialization function. Read simple parameters. Read and parse xml file for decider and analogue models configuration.  <a href="#51d4997ab7973ee4b174ae49fb9b658f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#ea91987fbece2dea329cf0a24dfa5450">handleMessage</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Normally a subclassed phy layer doesn't has to implement this method. We are only doing this to display some messages telling the current state.  <a href="#ea91987fbece2dea329cf0a24dfa5450"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#5c7715228c82a99be72e75646deae0a3">log</a> (std::string msg)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00123.html#5a4b25681dcaabb77363361fbb87be53">toString</a> (const T &amp;v)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a00001.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#5a1cad5e4f0e2d618db45aad25f1c426">getAnalogueModelFromName</a> (std::string name, <a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called by the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to initialize the AnalogueModels read from the config.xml.  <a href="#5a1cad5e4f0e2d618db45aad25f1c426"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00001.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#60a886e10c89c1e1701cc1ea18397a31">createRandomFreqTimeModel</a> (<a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and initializes a <a class="el" href="a00115.html" title="Sample implementation of an AnalogueModel which uses MultiDimMapping as AttenuationMapping...">RandomFreqTimeModel</a> with the passed parameter values.  <a href="#60a886e10c89c1e1701cc1ea18397a31"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00001.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#6fa606188ce17eea95a1fe645b93aa6f">createRandomFrequencyOnlyModel</a> (<a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and initializes a RandomFreqOnlyModel with the passed parameter values.  <a href="#6fa606188ce17eea95a1fe645b93aa6f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="a00052.html">Decider</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#92f8ad35c7cfed1e712ee00ead259aee">getDeciderFromName</a> (std::string name, <a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called by the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to initialize the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> read from the config.xml.  <a href="#92f8ad35c7cfed1e712ee00ead259aee"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#1e1689f12711fd9623460fc6c25a2ea3">myIndex</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Simple <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> sub class which is just responsible for creating and initialising its own AnalogueModels and <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a>. 
<p>
Initializing own AnalogueModels or <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> is the only task a PhyLayer- subclass will normally have to do. Everything else should be already done by the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> or should be implemented by writing your own <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> or AnalogueModels. 
<p>Definition at line <a class="el" href="a00414.html#l00019">19</a> of file <a class="el" href="a00414.html">SamplePhyLayer.h</a>.</p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="60a886e10c89c1e1701cc1ea18397a31"></a><!-- doxytag: member="SamplePhyLayer::createRandomFreqTimeModel" ref="60a886e10c89c1e1701cc1ea18397a31" args="(ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html">AnalogueModel</a> * SamplePhyLayer::createRandomFreqTimeModel           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates and initializes a <a class="el" href="a00115.html" title="Sample implementation of an AnalogueModel which uses MultiDimMapping as AttenuationMapping...">RandomFreqTimeModel</a> with the passed parameter values. 
<p>

<p>Definition at line <a class="el" href="a00413.html#l00063">63</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00413.html#l00097">getAnalogueModelFromName()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00063"></a>00063                                                                             {
<a name="l00064"></a>00064 
<a name="l00065"></a>00065   <span class="comment">//get the "seed"-parameter from the config</span>
<a name="l00066"></a>00066   ParameterMap::iterator it = params.find(<span class="stringliteral">"seed"</span>);
<a name="l00067"></a>00067 
<a name="l00068"></a>00068   <span class="comment">//create AnalogueModel with default seed if no seed parameter was defined</span>
<a name="l00069"></a>00069   <span class="keywordflow">if</span>(it == params.end()){
<a name="l00070"></a>00070     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00115.html" title="Sample implementation of an AnalogueModel which uses MultiDimMapping as AttenuationMapping...">RandomFreqTimeModel</a>();
<a name="l00071"></a>00071   }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073   <span class="keywordtype">long</span> seed = it-&gt;second.longValue();
<a name="l00074"></a>00074   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00115.html" title="Sample implementation of an AnalogueModel which uses MultiDimMapping as AttenuationMapping...">RandomFreqTimeModel</a>(seed);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6fa606188ce17eea95a1fe645b93aa6f"></a><!-- doxytag: member="SamplePhyLayer::createRandomFrequencyOnlyModel" ref="6fa606188ce17eea95a1fe645b93aa6f" args="(ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html">AnalogueModel</a> * SamplePhyLayer::createRandomFrequencyOnlyModel           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates and initializes a RandomFreqOnlyModel with the passed parameter values. 
<p>

<p>Definition at line <a class="el" href="a00413.html#l00082">82</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00413.html#l00097">getAnalogueModelFromName()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00082"></a>00082                                                                                  {
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <span class="comment">//get the "seed"-parameter from the config</span>
<a name="l00085"></a>00085   ParameterMap::iterator it = params.find(<span class="stringliteral">"seed"</span>);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   <span class="comment">//create AnalogueModel with default seed if no seed parameter was defined</span>
<a name="l00088"></a>00088   <span class="keywordflow">if</span>(it == params.end()){
<a name="l00089"></a>00089     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00116.html" title="Sample implementation of an AnalogueModel which uses MultiDimMapping as AttenuationMapping...">RandomFrequencyOnlyModel</a>();
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="keywordtype">long</span> seed = it-&gt;second.longValue();
<a name="l00093"></a>00093   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00116.html" title="Sample implementation of an AnalogueModel which uses MultiDimMapping as AttenuationMapping...">RandomFrequencyOnlyModel</a>(seed);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5a1cad5e4f0e2d618db45aad25f1c426"></a><!-- doxytag: member="SamplePhyLayer::getAnalogueModelFromName" ref="5a1cad5e4f0e2d618db45aad25f1c426" args="(std::string name, ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html">AnalogueModel</a> * SamplePhyLayer::getAnalogueModelFromName           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is called by the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to initialize the AnalogueModels read from the config.xml. 
<p>
Every <a class="el" href="a00001.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> which should be used by a Simulation using this class has to be known (and initialized) by either this method or one of the base methods (which means this method should call the base method to make them able to load the AnalogueModels known by them). 
<p>Reimplemented from <a class="el" href="a00109.html#98adffcb346116dd40d956085dd906a5">PhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00413.html#l00097">97</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00413.html#l00063">createRandomFreqTimeModel()</a>, and <a class="el" href="a00413.html#l00082">createRandomFrequencyOnlyModel()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00097"></a>00097                                                                                             {
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   <span class="keywordflow">if</span>(name == <span class="stringliteral">"RandomFreqTimeModel"</span>)
<a name="l00100"></a>00100     <span class="keywordflow">return</span> <a class="code" href="a00123.html#60a886e10c89c1e1701cc1ea18397a31" title="Creates and initializes a RandomFreqTimeModel with the passed parameter values.">createRandomFreqTimeModel</a>(params);
<a name="l00101"></a>00101   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(name == <span class="stringliteral">"RandomFrequencyOnlyModel"</span>)
<a name="l00102"></a>00102     <span class="keywordflow">return</span> <a class="code" href="a00123.html#6fa606188ce17eea95a1fe645b93aa6f" title="Creates and initializes a RandomFreqOnlyModel with the passed parameter values.">createRandomFrequencyOnlyModel</a>(params);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   <span class="comment">//If we couldn't create the passed analogue model, call the method</span>
<a name="l00105"></a>00105   <span class="comment">//of our base class.</span>
<a name="l00106"></a>00106   <span class="comment">//Note: even if all models defined in the xml-config can be handled</span>
<a name="l00107"></a>00107   <span class="comment">//by this class method, there will be at least the call to create</span>
<a name="l00108"></a>00108   <span class="comment">//the RadioStateAnalogueModel which in almost every case has to be done</span>
<a name="l00109"></a>00109   <span class="comment">//by the PhyLayer.</span>
<a name="l00110"></a>00110   <span class="keywordflow">return</span> <a class="code" href="a00123.html#5a1cad5e4f0e2d618db45aad25f1c426" title="This method is called by the PhyLayer to initialize the AnalogueModels read from...">PhyLayer::getAnalogueModelFromName</a>(name, params);
<a name="l00111"></a>00111 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="92f8ad35c7cfed1e712ee00ead259aee"></a><!-- doxytag: member="SamplePhyLayer::getDeciderFromName" ref="92f8ad35c7cfed1e712ee00ead259aee" args="(std::string name, ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00052.html">Decider</a> * SamplePhyLayer::getDeciderFromName           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#f29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is called by the <a class="el" href="a00109.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to initialize the <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> read from the config.xml. 
<p>
Every <a class="el" href="a00052.html" title="The basic Decider class.">Decider</a> which should be usable by a Simulation using this class has to be known by either this method or (one of) the base mthods. 
<p>Reimplemented from <a class="el" href="a00109.html#a09a8558e04d2aba287be91d7fbd2548">PhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00413.html#l00113">113</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00413.html#l00055">log()</a>, and <a class="el" href="a00414.html#l00021">myIndex</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00113"></a>00113                                                                                 {
<a name="l00114"></a>00114 
<a name="l00115"></a>00115   <span class="keywordflow">if</span>(name == <span class="stringliteral">"ThresholdDecider"</span>){
<a name="l00116"></a>00116     ParameterMap::iterator it = params.find(<span class="stringliteral">"threshold"</span>);
<a name="l00117"></a>00117     <span class="keywordflow">if</span>(it == params.end()){
<a name="l00118"></a>00118       <a class="code" href="a00123.html#5c7715228c82a99be72e75646deae0a3">log</a>(<span class="stringliteral">"ERROR: No threshold parameter defined for ThresholdDecider!"</span>);
<a name="l00119"></a>00119       <span class="keywordflow">return</span> 0;
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="comment">/*</span>
<a name="l00123"></a>00123 <span class="comment">     * The value for the deciders threshold should be checked here against</span>
<a name="l00124"></a>00124 <span class="comment">     * the value specified in ConnectionManager that stores the max/min valid value.</span>
<a name="l00125"></a>00125 <span class="comment">     *</span>
<a name="l00126"></a>00126 <span class="comment">     */</span>
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00134.html" title="A simple Decider implementation which only checks for a received signal if the receiving...">ThresholdDecider</a>(<span class="keyword">this</span>, <a class="code" href="a00123.html#1e1689f12711fd9623460fc6c25a2ea3">myIndex</a>, it-&gt;second.doubleValue());
<a name="l00129"></a>00129   }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131   <span class="keywordflow">return</span> 0;
<a name="l00132"></a>00132 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ea91987fbece2dea329cf0a24dfa5450"></a><!-- doxytag: member="SamplePhyLayer::handleMessage" ref="ea91987fbece2dea329cf0a24dfa5450" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SamplePhyLayer::handleMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Normally a subclassed phy layer doesn't has to implement this method. We are only doing this to display some messages telling the current state. 
<p>
Note: IF a subclass overrides this method it should make sure to call the base method. 
<p>Reimplemented from <a class="el" href="a00021.html#3880154c8db8b8efb5315cb6ef8f6c41">BasePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00413.html#l00022">22</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00368.html#l00028">MacToPhyInterface::AIR_FRAME</a>, <a class="el" href="a00358.html#l00134">BasePhyLayer::END_RECEIVE</a>, <a class="el" href="a00413.html#l00055">log()</a>, <a class="el" href="a00358.html#l00132">BasePhyLayer::RECEIVING</a>, and <a class="el" href="a00358.html#l00130">BasePhyLayer::START_RECEIVE</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00022"></a>00022                                                 {
<a name="l00023"></a>00023   <span class="keywordflow">if</span>(msg-&gt;getKind() == <a class="code" href="a00090.html#36bc50a86bf1cc0f9efd374613d61a5296eafe94b4f472727793a10013af7671">AIR_FRAME</a>) {
<a name="l00024"></a>00024     AirFrame* frame = <span class="keyword">static_cast&lt;</span>AirFrame*<span class="keyword">&gt;</span>(msg);
<a name="l00025"></a>00025 
<a name="l00026"></a>00026     <span class="comment">//normally a subclassed phylayer doesn't has to care about these</span>
<a name="l00027"></a>00027     <span class="comment">//events, we only catch them to display some messages telling the</span>
<a name="l00028"></a>00028     <span class="comment">//current state of the receiving process</span>
<a name="l00029"></a>00029     <span class="keywordflow">switch</span>(frame-&gt;getState()) {
<a name="l00030"></a>00030     <span class="keywordflow">case</span> <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc1a0cb17278ea70e7e327de30aad32e0a0" title="Start of actual receiving process of the AirFrame.">START_RECEIVE</a>:
<a name="l00031"></a>00031       <span class="keywordflow">if</span>(frame-&gt;getSignal().getSignalStart() != simTime())
<a name="l00032"></a>00032         <a class="code" href="a00123.html#5c7715228c82a99be72e75646deae0a3">log</a>(<span class="stringliteral">"Received delayed AirFrame (state=START_RECEIVE). Proceeding it directly to RECEIVING state"</span>);
<a name="l00033"></a>00033       <span class="keywordflow">else</span>
<a name="l00034"></a>00034         <a class="code" href="a00123.html#5c7715228c82a99be72e75646deae0a3">log</a>(<span class="stringliteral">"Received AirFrame (state=START_RECEIVE). Proceeding it directly to RECEIVING state"</span>);
<a name="l00035"></a>00035       <span class="keywordflow">break</span>;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037     <span class="keywordflow">case</span> <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc12900d4f5f03ec09b83e5c24744924755" title="AirFrame is being received.">RECEIVING</a>:
<a name="l00038"></a>00038       <a class="code" href="a00123.html#5c7715228c82a99be72e75646deae0a3">log</a>(<span class="stringliteral">"Received scheduled AirFrame for further processing through the decider."</span>);
<a name="l00039"></a>00039       <span class="keywordflow">break</span>;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041     <span class="keywordflow">case</span> <a class="code" href="a00021.html#1333b977d8e274e32b80a4b300c96bc18c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>:
<a name="l00042"></a>00042       <a class="code" href="a00123.html#5c7715228c82a99be72e75646deae0a3">log</a>(<span class="stringliteral">"Last receive of scheduled AirFrame because AirFrame transmission is over. (state=END_RECEIVE"</span>);
<a name="l00043"></a>00043       <span class="keywordflow">break</span>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="keywordflow">default</span>:
<a name="l00046"></a>00046       <span class="keywordflow">break</span>;
<a name="l00047"></a>00047     }
<a name="l00048"></a>00048   }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050   <span class="comment">//IF a subclass of PhyLayer overrides the handleMessage method it should</span>
<a name="l00051"></a>00051   <span class="comment">//make sure to call the base method.</span>
<a name="l00052"></a>00052   <a class="code" href="a00123.html#ea91987fbece2dea329cf0a24dfa5450" title="Normally a subclassed phy layer doesn&amp;#39;t has to implement this method. We are...">PhyLayer::handleMessage</a>(msg);
<a name="l00053"></a>00053 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="51d4997ab7973ee4b174ae49fb9b658f"></a><!-- doxytag: member="SamplePhyLayer::initialize" ref="51d4997ab7973ee4b174ae49fb9b658f" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SamplePhyLayer::initialize           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OMNeT++ initialization function. Read simple parameters. Read and parse xml file for decider and analogue models configuration. 
<p>

<p>Reimplemented from <a class="el" href="a00021.html#08704deaf03b73c8eda67cc60e670853">BasePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00413.html#l00010">10</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00342.html#l00086">BaseModule::findHost()</a>, and <a class="el" href="a00414.html#l00021">myIndex</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00010"></a>00010                                          {
<a name="l00011"></a>00011   <span class="comment">//call BasePhy's initialize</span>
<a name="l00012"></a>00012   <a class="code" href="a00123.html#51d4997ab7973ee4b174ae49fb9b658f" title="OMNeT++ initialization function. Read simple parameters. Read and parse xml file...">PhyLayer::initialize</a>(stage);
<a name="l00013"></a>00013 
<a name="l00014"></a>00014   <span class="keywordflow">if</span>(stage == 0) {
<a name="l00015"></a>00015     <a class="code" href="a00123.html#1e1689f12711fd9623460fc6c25a2ea3">myIndex</a> = <a class="code" href="a00019.html#abf0226159b22b46e70031fd3bb3b1b2" title="Function to get a pointer to the host module.">findHost</a>()-&gt;getIndex();
<a name="l00016"></a>00016 
<a name="l00017"></a>00017   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(stage == 1) {
<a name="l00018"></a>00018     <span class="comment">//Decider and AnalogueModels are created by the PhyLayer in this stage</span>
<a name="l00019"></a>00019   }
<a name="l00020"></a>00020 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5c7715228c82a99be72e75646deae0a3"></a><!-- doxytag: member="SamplePhyLayer::log" ref="5c7715228c82a99be72e75646deae0a3" args="(std::string msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SamplePhyLayer::log           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00413.html#l00055">55</a> of file <a class="el" href="a00413.html">SamplePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00414.html#l00021">myIndex</a>.</p>

<p>Referenced by <a class="el" href="a00413.html#l00113">getDeciderFromName()</a>, and <a class="el" href="a00413.html#l00022">handleMessage()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00055"></a>00055                                       {
<a name="l00056"></a>00056   ev &lt;&lt; <span class="stringliteral">"[Host "</span> &lt;&lt; <a class="code" href="a00123.html#1e1689f12711fd9623460fc6c25a2ea3">myIndex</a> &lt;&lt; <span class="stringliteral">"] - PhyLayer: "</span> &lt;&lt; msg &lt;&lt; endl;
<a name="l00057"></a>00057 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5a4b25681dcaabb77363361fbb87be53"></a><!-- doxytag: member="SamplePhyLayer::toString" ref="5a4b25681dcaabb77363361fbb87be53" args="(const T &amp;v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string SamplePhyLayer::toString           </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&nbsp;</td>
          <td class="paramname"> <em>v</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Converts the passed value to a string. There has to be an implementation of the &lt;&lt; operator for the type of the variable and std::ostream:<p>
std::ostream&amp; operator&lt;&lt;(std::ostream&amp; o, const T&amp; v) 
<p>Definition at line <a class="el" href="a00414.html#l00072">72</a> of file <a class="el" href="a00414.html">SamplePhyLayer.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00072"></a>00072                                                    {
<a name="l00073"></a>00073     std::ostringstream o;
<a name="l00074"></a>00074     o &lt;&lt; v;
<a name="l00075"></a>00075     <span class="keywordflow">return</span> o.str();
<a name="l00076"></a>00076   };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="1e1689f12711fd9623460fc6c25a2ea3"></a><!-- doxytag: member="SamplePhyLayer::myIndex" ref="1e1689f12711fd9623460fc6c25a2ea3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00123.html#1e1689f12711fd9623460fc6c25a2ea3">SamplePhyLayer::myIndex</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00414.html#l00021">21</a> of file <a class="el" href="a00414.html">SamplePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00413.html#l00113">getDeciderFromName()</a>, <a class="el" href="a00413.html#l00010">initialize()</a>, and <a class="el" href="a00413.html#l00055">log()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>examples/analogueModels/<a class="el" href="a00414.html">SamplePhyLayer.h</a><li>examples/analogueModels/<a class="el" href="a00413.html">SamplePhyLayer.cc</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 28 15:57:08 2009 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
