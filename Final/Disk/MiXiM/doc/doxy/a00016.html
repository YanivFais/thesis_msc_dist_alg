<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MiXiM: BaseLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BaseLayer Class Reference<br>
<small>
[<a class="el" href="a00309.html">baseModules - base module classes of MiXiM</a>]</small>
</h1><!-- doxytag: class="BaseLayer" --><!-- doxytag: inherits="BatteryAccess" -->A very simple layer template.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="a00337.html">BaseLayer.h</a>&gt;</code>
<p>
Inherits <a class="el" href="a00025.html">BatteryAccess</a>.
<p>
Inherited by <a class="el" href="a00004.html">BaseApplLayer</a>, <a class="el" href="a00017.html">BaseMacLayer</a>, and <a class="el" href="a00020.html">BaseNetwLayer</a>.
<p>
<div class="dynheader">
Collaboration diagram for BaseLayer:</div>
<div class="dynsection">
<p><center><img src="a00768.png" border="0" usemap="#a00769" alt="Collaboration graph"></center>
<map name="a00769">
<area shape="rect" href="a00025.html" title="Extends BaseModule by several methods which provide access to the battery module..." alt="" coords="5,5,112,32"><area shape="rect" href="a00108.html" title="PassedMessage" alt="" coords="136,5,253,32"></map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="a00770.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#70f5ea30a9980d57b8384faed29ec3eb">initialize</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#70f5ea30a9980d57b8384faed29ec3eb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#8039dac8d02052c97c1fcc209910fdde">handleMessage</a> (cMessage *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called every time a message arrives.  <a href="#8039dac8d02052c97c1fcc209910fdde"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#5ab11502dbeeea89693d29841376a2f7">finish</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#0197900f0ab83323a623448fc4e8b239">~BaseLayer</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Handle Messages</div></td></tr>
<tr><td colspan="2"><div class="groupText">Functions to be redefined by the programmer<p>
These are the functions provided to add own functionality to your modules. These functions are called whenever a blackboard message, a self message or a data message from the upper or lower layer arrives respectively. <br><br></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#87d7e1e5aa73216f07e35d7be4358924">handleSelfMsg</a> (cMessage *msg)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle self messages such as timer...  <a href="#87d7e1e5aa73216f07e35d7be4358924"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#8c0fcfb2e806357a65d5bdb1c338627b">handleUpperMsg</a> (cMessage *msg)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from upper layer.  <a href="#8c0fcfb2e806357a65d5bdb1c338627b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#5ca2278405070baa474dfbf059930247">handleLowerMsg</a> (cMessage *msg)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from lower layer.  <a href="#5ca2278405070baa474dfbf059930247"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a37925527fae20a5de1a755103056219">handleLowerControl</a> (cMessage *msg)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle control messages from lower layer.  <a href="#a37925527fae20a5de1a755103056219"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#b412568faae75040194e01d5e541dd67">handleUpperControl</a> (cMessage *msg)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle control messages from upper layer.  <a href="#b412568faae75040194e01d5e541dd67"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Convenience Functions</div></td></tr>
<tr><td colspan="2"><div class="groupText">Functions for convenience - NOT to be modified<p>
These are functions taking care of message encapsulation and message sending. Normally you should not need to alter these.<p>
All these functions assume that YOU do all the necessary handling of control information etc. before you use them. <br><br></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#1873d6e3fc6d92cf8482b39f1c5ac6c8">sendDown</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a message to the lower layer.  <a href="#1873d6e3fc6d92cf8482b39f1c5ac6c8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#dbf061566606041db811b519f0400ed5">sendUp</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a message to the upper layer.  <a href="#dbf061566606041db811b519f0400ed5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a1190a06fb4dfb15d8ff001468335dc8">sendControlUp</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a control message to an upper layer.  <a href="#a1190a06fb4dfb15d8ff001468335dc8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#6d01a0f56978740d7617c2e338858cc3">sendControlDown</a> (cMessage *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a control message to a lower layer.  <a href="#6d01a0f56978740d7617c2e338858cc3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a> (<a class="el" href="a00108.html#11c83e74aa007c495b32ec3ed4953a50">PassedMessage::direction_t</a> dir, <a class="el" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6">PassedMessage::gates_t</a> gate, const cMessage *m)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#f20218f97a82a544a6f7c4316b5486d1">doStats</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ef0f20a7d27c6f6af97b4d04721ce4c6">catPassedMsg</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00108.html">PassedMessage</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#9377542e2efeb2cfdd53f54c1ddca418">hostId</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The hosts id.  <a href="#9377542e2efeb2cfdd53f54c1ddca418"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#8a3984579f72a44847e70009fd184180">upperGateIn</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">gate id  <a href="#8a3984579f72a44847e70009fd184180"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#98085c0f424ef86e2c7e1a1abe3d0cac">upperGateOut</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#0d76b53f4d69d3d6e58e0b50a84c9200">lowerGateIn</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#82e7427443b7c2496e36220830d8bdba">lowerGateOut</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ba75bba311458c62b4b2fa2bb9711a91">upperControlIn</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#5e0a6cb17bfc2fd3127ac884d0e9d3c8">upperControlOut</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#1d2eb99059680b97b366ae8342f18af5">lowerControlIn</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#380159410191c5ea0e5f95766a4814dd">lowerControlOut</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A very simple layer template. 
<p>
This module provides basic abstractions that ease development of a network or MAC layer.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Andreas Koepke </dd></dl>

<p>Definition at line <a class="el" href="a00337.html#l00038">38</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="0197900f0ab83323a623448fc4e8b239"></a><!-- doxytag: member="BaseLayer::~BaseLayer" ref="0197900f0ab83323a623448fc4e8b239" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseLayer::~BaseLayer           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00336.html#l00143">143</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00337.html#l00055">doStats</a>, and <a class="el" href="a00337.html#l00057">passedMsg</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00144"></a>00144 {
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (<a class="code" href="a00016.html#f20218f97a82a544a6f7c4316b5486d1">doStats</a>) {
<a name="l00146"></a>00146         <span class="keyword">delete</span> <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="5ab11502dbeeea89693d29841376a2f7"></a><!-- doxytag: member="BaseLayer::finish" ref="5ab11502dbeeea89693d29841376a2f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::finish           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Reimplemented in <a class="el" href="a00133.html#fc9f94dad6a37236286582a08e1fa54c">TestApplLayer</a>, <a class="el" href="a00033.html#a3413a8e1ebfbd7630b7389dc4d7f211">BurstApplLayerBattery</a>, <a class="el" href="a00051.html#eaffa0655b4e87224a9a2f09b96805d7">CSMAMacLayer</a>, and <a class="el" href="a00086.html#2f3c51473a890e1c3e3afb5dc1b75252">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00336.html#l00139">139</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00139"></a>00139                        {
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a37925527fae20a5de1a755103056219"></a><!-- doxytag: member="BaseLayer::handleLowerControl" ref="a37925527fae20a5de1a755103056219" args="(cMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseLayer::handleLowerControl           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle control messages from lower layer. 
<p>

<p>Implemented in <a class="el" href="a00004.html#581ca398f2066910d8d10676e90d206b">BaseApplLayer</a>, <a class="el" href="a00017.html#796d456d593dfab3188b37e506dd76a8">BaseMacLayer</a>, <a class="el" href="a00020.html#478dcd88ab7a82412deb8075afe61278">BaseNetwLayer</a>, <a class="el" href="a00051.html#2eb12cedf0b4b5e6fda8bd6666186cb6">CSMAMacLayer</a>, and <a class="el" href="a00086.html#41f1a7b86f420e1f840c14badf2b0890">Mac80211</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5ca2278405070baa474dfbf059930247"></a><!-- doxytag: member="BaseLayer::handleLowerMsg" ref="5ca2278405070baa474dfbf059930247" args="(cMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseLayer::handleLowerMsg           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle messages from lower layer. 
<p>

<p>Implemented in <a class="el" href="a00004.html#448cd52ea7a441a8f2edb3794a59205b">BaseApplLayer</a>, <a class="el" href="a00017.html#413375cec02b990a521b62086a02264c">BaseMacLayer</a>, <a class="el" href="a00020.html#58afc64e0a96fe4d80d6b9f53cfd53c6">BaseNetwLayer</a>, <a class="el" href="a00133.html#f64945ae392b392418574b58b76232b9">TestApplLayer</a>, <a class="el" href="a00033.html#66a2f76f5f30f1920dc65f00a6fd1ac3">BurstApplLayerBattery</a>, <a class="el" href="a00051.html#83911b5673de047bcfc3c9b0a719ff15">CSMAMacLayer</a>, and <a class="el" href="a00086.html#c8bfb04590aab2434bd8d17ee4e213d9">Mac80211</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8039dac8d02052c97c1fcc209910fdde"></a><!-- doxytag: member="BaseLayer::handleMessage" ref="8039dac8d02052c97c1fcc209910fdde" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::handleMessage           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called every time a message arrives. 
<p>
The basic handle message function.<p>
Depending on the gate a message arrives handleMessage just calls different handle*Msg functions to further process the message.<p>
You should not make any changes in this function but implement all your functionality into the handle*Msg functions called from here.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="a00016.html#8c0fcfb2e806357a65d5bdb1c338627b" title="Handle messages from upper layer.">handleUpperMsg</a>, <a class="el" href="a00016.html#5ca2278405070baa474dfbf059930247" title="Handle messages from lower layer.">handleLowerMsg</a>, <a class="el" href="a00016.html#87d7e1e5aa73216f07e35d7be4358924" title="Handle self messages such as timer...">handleSelfMsg</a> </dd></dl>

<p>Definition at line <a class="el" href="a00336.html#l00073">73</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00016.html#a37925527fae20a5de1a755103056219">handleLowerControl()</a>, <a class="el" href="a00016.html#5ca2278405070baa474dfbf059930247">handleLowerMsg()</a>, <a class="el" href="a00016.html#87d7e1e5aa73216f07e35d7be4358924">handleSelfMsg()</a>, <a class="el" href="a00016.html#b412568faae75040194e01d5e541dd67">handleUpperControl()</a>, <a class="el" href="a00016.html#8c0fcfb2e806357a65d5bdb1c338627b">handleUpperMsg()</a>, <a class="el" href="a00403.html#l00021">PassedMessage::INCOMING</a>, <a class="el" href="a00403.html#l00017">PassedMessage::LOWER_CONTROL</a>, <a class="el" href="a00403.html#l00016">PassedMessage::LOWER_DATA</a>, <a class="el" href="a00337.html#l00050">lowerControlIn</a>, <a class="el" href="a00337.html#l00046">lowerGateIn</a>, <a class="el" href="a00336.html#l00128">recordPacket()</a>, <a class="el" href="a00403.html#l00015">PassedMessage::UPPER_CONTROL</a>, <a class="el" href="a00403.html#l00014">PassedMessage::UPPER_DATA</a>, <a class="el" href="a00337.html#l00048">upperControlIn</a>, and <a class="el" href="a00337.html#l00044">upperGateIn</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075     <span class="keywordflow">if</span> (msg-&gt;isSelfMessage()){
<a name="l00076"></a>00076         <a class="code" href="a00016.html#87d7e1e5aa73216f07e35d7be4358924" title="Handle self messages such as timer...">handleSelfMsg</a>(msg);
<a name="l00077"></a>00077     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==<a class="code" href="a00016.html#8a3984579f72a44847e70009fd184180" title="gate id">upperGateIn</a>) {
<a name="l00078"></a>00078         <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a5043c42d4afa45cd04736e0d59167260a4">PassedMessage::INCOMING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6df76d3ca7bb9a62bed70965639d59859">PassedMessage::UPPER_DATA</a>,msg);
<a name="l00079"></a>00079         <a class="code" href="a00016.html#8c0fcfb2e806357a65d5bdb1c338627b" title="Handle messages from upper layer.">handleUpperMsg</a>(msg);
<a name="l00080"></a>00080     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==<a class="code" href="a00016.html#ba75bba311458c62b4b2fa2bb9711a91">upperControlIn</a>) {
<a name="l00081"></a>00081         <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a5043c42d4afa45cd04736e0d59167260a4">PassedMessage::INCOMING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6ea991e99dac6c91c9e3e89f902f1075d">PassedMessage::UPPER_CONTROL</a>,msg);
<a name="l00082"></a>00082         <a class="code" href="a00016.html#b412568faae75040194e01d5e541dd67" title="Handle control messages from upper layer.">handleUpperControl</a>(msg);
<a name="l00083"></a>00083     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==<a class="code" href="a00016.html#1d2eb99059680b97b366ae8342f18af5">lowerControlIn</a>){
<a name="l00084"></a>00084         <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a5043c42d4afa45cd04736e0d59167260a4">PassedMessage::INCOMING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6fb379d2a15495f1ef2f290dc9ac97299">PassedMessage::LOWER_CONTROL</a>,msg);
<a name="l00085"></a>00085         <a class="code" href="a00016.html#a37925527fae20a5de1a755103056219" title="Handle control messages from lower layer.">handleLowerControl</a>(msg);
<a name="l00086"></a>00086     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==<a class="code" href="a00016.html#0d76b53f4d69d3d6e58e0b50a84c9200">lowerGateIn</a>) {
<a name="l00087"></a>00087         <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a5043c42d4afa45cd04736e0d59167260a4">PassedMessage::INCOMING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e697265ac51f333c88508670c5d3f5ded9">PassedMessage::LOWER_DATA</a>,msg);
<a name="l00088"></a>00088         <a class="code" href="a00016.html#5ca2278405070baa474dfbf059930247" title="Handle messages from lower layer.">handleLowerMsg</a>(msg);
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==-1) {
<a name="l00091"></a>00091         <span class="comment">/* Classes extending this class may not use all the gates, f.e.</span>
<a name="l00092"></a>00092 <span class="comment">         * BaseApplLayer has no upper gates. In this case all upper gate-</span>
<a name="l00093"></a>00093 <span class="comment">         * handles are initialized to -1. When getArrivalGateId() equals -1,</span>
<a name="l00094"></a>00094 <span class="comment">         * it would be wrong to forward the message to one of these gates,</span>
<a name="l00095"></a>00095 <span class="comment">         * as they actually don't exist, so raise an error instead.</span>
<a name="l00096"></a>00096 <span class="comment">         */</span>
<a name="l00097"></a>00097         opp_error(<span class="stringliteral">"No self message and no gateID?? Check configuration."</span>);
<a name="l00098"></a>00098     } <span class="keywordflow">else</span> {
<a name="l00099"></a>00099         <span class="comment">/* msg-&gt;getArrivalGateId() should be valid, but it isn't recognized</span>
<a name="l00100"></a>00100 <span class="comment">         * here. This could signal the case that this class is extended</span>
<a name="l00101"></a>00101 <span class="comment">         * with extra gates, but handleMessage() isn't overridden to</span>
<a name="l00102"></a>00102 <span class="comment">         * check for the new gate(s).</span>
<a name="l00103"></a>00103 <span class="comment">         */</span>
<a name="l00104"></a>00104         opp_error(<span class="stringliteral">"Unknown gateID?? Check configuration or override handleMessage()."</span>);
<a name="l00105"></a>00105     }
<a name="l00106"></a>00106 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="87d7e1e5aa73216f07e35d7be4358924"></a><!-- doxytag: member="BaseLayer::handleSelfMsg" ref="87d7e1e5aa73216f07e35d7be4358924" args="(cMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseLayer::handleSelfMsg           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle self messages such as timer... 
<p>

<p>Implemented in <a class="el" href="a00004.html#ba8356197b089f23dd9c19b6b7937dab">BaseApplLayer</a>, <a class="el" href="a00017.html#95ce03241a7dd66baa693607a74eca07">BaseMacLayer</a>, <a class="el" href="a00020.html#758f0a0b17aec922758173e19624f212">BaseNetwLayer</a>, <a class="el" href="a00133.html#7cc6a018758d27f31133de05804281f8">TestApplLayer</a>, <a class="el" href="a00032.html#e3bd389dede2510650cfb8b32d5716b4">BurstApplLayer</a>, <a class="el" href="a00033.html#a50363ece763f8c35957ce60fab0d9a3">BurstApplLayerBattery</a>, <a class="el" href="a00051.html#254a29c1cc1f0292039d57c1d189cda3">CSMAMacLayer</a>, and <a class="el" href="a00086.html#990af33f857669759da0cbeebd1c2431">Mac80211</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b412568faae75040194e01d5e541dd67"></a><!-- doxytag: member="BaseLayer::handleUpperControl" ref="b412568faae75040194e01d5e541dd67" args="(cMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseLayer::handleUpperControl           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle control messages from upper layer. 
<p>

<p>Implemented in <a class="el" href="a00004.html#823ae7127366be3fa2e11c98ace537b7">BaseApplLayer</a>, <a class="el" href="a00017.html#4a1a81a79e239a0724f3b06d9f18c505">BaseMacLayer</a>, and <a class="el" href="a00020.html#5265eb248cc3660c862444a3591f0ec2">BaseNetwLayer</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8c0fcfb2e806357a65d5bdb1c338627b"></a><!-- doxytag: member="BaseLayer::handleUpperMsg" ref="8c0fcfb2e806357a65d5bdb1c338627b" args="(cMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseLayer::handleUpperMsg           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle messages from upper layer. 
<p>
This function is pure virtual here, because there is no reasonable guess what to do with it by default. 
<p>Implemented in <a class="el" href="a00004.html#29c15eb83ed7749c838c005a3fb554d4">BaseApplLayer</a>, <a class="el" href="a00017.html#6de2ca07018de313a7147a03e6d77bff">BaseMacLayer</a>, <a class="el" href="a00020.html#0b473fbb2517ac7b0c633afdb002c269">BaseNetwLayer</a>, <a class="el" href="a00051.html#06c96c060afdff5c0f348b5ebef5c54d">CSMAMacLayer</a>, and <a class="el" href="a00086.html#f7e230f8713536482417699f2f6bee71">Mac80211</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="70f5ea30a9980d57b8384faed29ec3eb"></a><!-- doxytag: member="BaseLayer::initialize" ref="70f5ea30a9980d57b8384faed29ec3eb" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::initialize           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialization of the module and some variables. 
<p>
First we have to initialize the module from which we derived ours, in this case <a class="el" href="a00019.html" title="Base class for all simple modules of a host that want to have access to the BaseUtility...">BaseModule</a>. This module takes care of the gate initialization. 
<p>Reimplemented from <a class="el" href="a00019.html#03030e439aaf030c83da6e71e8be2f80">BaseModule</a>.</p>

<p>Reimplemented in <a class="el" href="a00004.html#a3ebaf5d1d1bdbec4648b07f65eb4145">BaseApplLayer</a>, <a class="el" href="a00017.html#61c82dc3b225eac37f7fa9936c28c2c3">BaseMacLayer</a>, <a class="el" href="a00020.html#1e521b5549bfe29ae94d95265c0fe8d2">BaseNetwLayer</a>, <a class="el" href="a00133.html#8df32483962ebc40e1eed225716e54cb">TestApplLayer</a>, <a class="el" href="a00032.html#e693c2f1fc343d8c253778a1de1c4082">BurstApplLayer</a>, <a class="el" href="a00033.html#8ccaf74e9a310c5f45447283df6dee7e">BurstApplLayerBattery</a>, <a class="el" href="a00051.html#660262c629f33b00401249d3fdac49be">CSMAMacLayer</a>, and <a class="el" href="a00086.html#b81dae24d79c2ef010301e2c219966c1">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00336.html#l00036">36</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00337.html#l00056">catPassedMsg</a>, <a class="el" href="a00337.html#l00055">doStats</a>, <a class="el" href="a00342.html#l00086">BaseModule::findHost()</a>, <a class="el" href="a00403.html#l00043">PassedMessage::fromModule</a>, <a class="el" href="a00346.html#l00265">BaseUtility::getCategory()</a>, <a class="el" href="a00337.html#l00058">hostId</a>, <a class="el" href="a00337.html#l00050">lowerControlIn</a>, <a class="el" href="a00337.html#l00051">lowerControlOut</a>, <a class="el" href="a00337.html#l00046">lowerGateIn</a>, <a class="el" href="a00337.html#l00047">lowerGateOut</a>, <a class="el" href="a00337.html#l00057">passedMsg</a>, <a class="el" href="a00337.html#l00048">upperControlIn</a>, <a class="el" href="a00337.html#l00049">upperControlOut</a>, <a class="el" href="a00337.html#l00044">upperGateIn</a>, <a class="el" href="a00337.html#l00045">upperGateOut</a>, and <a class="el" href="a00343.html#l00081">BaseModule::utility</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00037"></a>00037 {
<a name="l00038"></a>00038   <a class="code" href="a00016.html#70f5ea30a9980d57b8384faed29ec3eb" title="Initialization of the module and some variables.">BatteryAccess::initialize</a>(stage);
<a name="l00039"></a>00039     <span class="keywordflow">if</span>(stage==0){
<a name="l00040"></a>00040         <span class="keywordflow">if</span> (hasPar(<span class="stringliteral">"stats"</span>) &amp;&amp; par(<span class="stringliteral">"stats"</span>).boolValue()) {
<a name="l00041"></a>00041             <a class="code" href="a00016.html#f20218f97a82a544a6f7c4316b5486d1">doStats</a> = <span class="keyword">true</span>;
<a name="l00042"></a>00042             <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a> = <span class="keyword">new</span> <a class="code" href="a00108.html">PassedMessage</a>();
<a name="l00043"></a>00043             <a class="code" href="a00016.html#ef0f20a7d27c6f6af97b4d04721ce4c6">catPassedMsg</a> = <a class="code" href="a00019.html#3f177bbac706fb0113555679dc7c4500" title="Cached pointer to the utility module.">utility</a>-&gt;<a class="code" href="a00022.html#d8ed51fa1714dcdce0b294e6e3c74408">getCategory</a>(<a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>);
<a name="l00044"></a>00044             <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>-&gt;<a class="code" href="a00108.html#6c340595cb29a4e8a4c55ea0503dffad">fromModule</a> = getId();
<a name="l00045"></a>00045             <a class="code" href="a00016.html#9377542e2efeb2cfdd53f54c1ddca418" title="The hosts id.">hostId</a> = <a class="code" href="a00019.html#abf0226159b22b46e70031fd3bb3b1b2" title="Function to get a pointer to the host module.">findHost</a>()-&gt;getId();
<a name="l00046"></a>00046         }
<a name="l00047"></a>00047         <span class="keywordflow">else</span> {
<a name="l00048"></a>00048             <a class="code" href="a00016.html#f20218f97a82a544a6f7c4316b5486d1">doStats</a> = <span class="keyword">false</span>;
<a name="l00049"></a>00049         }
<a name="l00050"></a>00050         <a class="code" href="a00016.html#8a3984579f72a44847e70009fd184180" title="gate id">upperGateIn</a>  = findGate(<span class="stringliteral">"upperGateIn"</span>);
<a name="l00051"></a>00051         <a class="code" href="a00016.html#98085c0f424ef86e2c7e1a1abe3d0cac">upperGateOut</a> = findGate(<span class="stringliteral">"upperGateOut"</span>);
<a name="l00052"></a>00052         <a class="code" href="a00016.html#0d76b53f4d69d3d6e58e0b50a84c9200">lowerGateIn</a>  = findGate(<span class="stringliteral">"lowerGateIn"</span>);
<a name="l00053"></a>00053         <a class="code" href="a00016.html#82e7427443b7c2496e36220830d8bdba">lowerGateOut</a> = findGate(<span class="stringliteral">"lowerGateOut"</span>);
<a name="l00054"></a>00054         <a class="code" href="a00016.html#ba75bba311458c62b4b2fa2bb9711a91">upperControlIn</a>  = findGate(<span class="stringliteral">"upperControlIn"</span>);
<a name="l00055"></a>00055         <a class="code" href="a00016.html#5e0a6cb17bfc2fd3127ac884d0e9d3c8">upperControlOut</a> = findGate(<span class="stringliteral">"upperControlOut"</span>);
<a name="l00056"></a>00056         <a class="code" href="a00016.html#1d2eb99059680b97b366ae8342f18af5">lowerControlIn</a>  = findGate(<span class="stringliteral">"lowerControlIn"</span>);
<a name="l00057"></a>00057         <a class="code" href="a00016.html#380159410191c5ea0e5f95766a4814dd">lowerControlOut</a> = findGate(<span class="stringliteral">"lowerControlOut"</span>);
<a name="l00058"></a>00058     }
<a name="l00059"></a>00059 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="33f4f320f4b6c4ec48651847338ff47f"></a><!-- doxytag: member="BaseLayer::recordPacket" ref="33f4f320f4b6c4ec48651847338ff47f" args="(PassedMessage::direction_t dir, PassedMessage::gates_t gate, const cMessage *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::recordPacket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00108.html#11c83e74aa007c495b32ec3ed4953a50">PassedMessage::direction_t</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6">PassedMessage::gates_t</a>&nbsp;</td>
          <td class="paramname"> <em>gate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cMessage *&nbsp;</td>
          <td class="paramname"> <em>m</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00336.html#l00128">128</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00337.html#l00056">catPassedMsg</a>, <a class="el" href="a00403.html#l00045">PassedMessage::direction</a>, <a class="el" href="a00337.html#l00055">doStats</a>, <a class="el" href="a00403.html#l00044">PassedMessage::gateType</a>, <a class="el" href="a00337.html#l00058">hostId</a>, <a class="el" href="a00403.html#l00048">PassedMessage::kind</a>, <a class="el" href="a00403.html#l00049">PassedMessage::name</a>, <a class="el" href="a00337.html#l00057">passedMsg</a>, <a class="el" href="a00346.html#l00241">BaseUtility::publishBBItem()</a>, and <a class="el" href="a00343.html#l00081">BaseModule::utility</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>, <a class="el" href="a00336.html#l00123">sendControlDown()</a>, <a class="el" href="a00336.html#l00118">sendControlUp()</a>, <a class="el" href="a00330.html#l00044">BaseApplLayer::sendDelayedDown()</a>, <a class="el" href="a00336.html#l00108">sendDown()</a>, and <a class="el" href="a00336.html#l00113">sendUp()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00130"></a>00130                                                    {
<a name="l00131"></a>00131     <span class="keywordflow">if</span> (!<a class="code" href="a00016.html#f20218f97a82a544a6f7c4316b5486d1">doStats</a>) <span class="keywordflow">return</span>;
<a name="l00132"></a>00132     <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>-&gt;<a class="code" href="a00108.html#f55219a6ed1e656af091cb7583467f5b">direction</a> = dir;
<a name="l00133"></a>00133     <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>-&gt;<a class="code" href="a00108.html#41f11b3139f3552cf2de3bb648c1ff55">gateType</a> = gate;
<a name="l00134"></a>00134     <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>-&gt;<a class="code" href="a00108.html#b4e2bf6d2317196af7e9c98ed2c406a6">kind</a> = msg-&gt;getKind();
<a name="l00135"></a>00135     <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>-&gt;<a class="code" href="a00108.html#8a4eb44ad1e43205d1881fec0c00a6d7">name</a> = msg-&gt;getName();
<a name="l00136"></a>00136     <a class="code" href="a00019.html#3f177bbac706fb0113555679dc7c4500" title="Cached pointer to the utility module.">utility</a>-&gt;<a class="code" href="a00022.html#f3e375a774329f553ddc670b737443a5">publishBBItem</a>(<a class="code" href="a00016.html#ef0f20a7d27c6f6af97b4d04721ce4c6">catPassedMsg</a>, <a class="code" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">passedMsg</a>, <a class="code" href="a00016.html#9377542e2efeb2cfdd53f54c1ddca418" title="The hosts id.">hostId</a>);
<a name="l00137"></a>00137 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6d01a0f56978740d7617c2e338858cc3"></a><!-- doxytag: member="BaseLayer::sendControlDown" ref="6d01a0f56978740d7617c2e338858cc3" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::sendControlDown           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a control message to a lower layer. 
<p>

<p>Definition at line <a class="el" href="a00336.html#l00123">123</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00403.html#l00017">PassedMessage::LOWER_CONTROL</a>, <a class="el" href="a00337.html#l00051">lowerControlOut</a>, <a class="el" href="a00403.html#l00022">PassedMessage::OUTGOING</a>, and <a class="el" href="a00336.html#l00128">recordPacket()</a>.</p>

<p>Referenced by <a class="el" href="a00434.html#l00543">Mac80211::handleCTSframe()</a>, <a class="el" href="a00434.html#l00493">Mac80211::handleDATAframe()</a>, <a class="el" href="a00434.html#l00478">Mac80211::handleRTSframe()</a>, and <a class="el" href="a00434.html#l00120">Mac80211::senseChannelWhileIdle()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123                                              {
<a name="l00124"></a>00124     <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a50862e80d4bad52c451a413eef983c16ae">PassedMessage::OUTGOING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6fb379d2a15495f1ef2f290dc9ac97299">PassedMessage::LOWER_CONTROL</a>,msg);
<a name="l00125"></a>00125     send(msg, <a class="code" href="a00016.html#380159410191c5ea0e5f95766a4814dd">lowerControlOut</a>);
<a name="l00126"></a>00126 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a1190a06fb4dfb15d8ff001468335dc8"></a><!-- doxytag: member="BaseLayer::sendControlUp" ref="a1190a06fb4dfb15d8ff001468335dc8" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::sendControlUp           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a control message to an upper layer. 
<p>

<p>Definition at line <a class="el" href="a00336.html#l00118">118</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00403.html#l00022">PassedMessage::OUTGOING</a>, <a class="el" href="a00336.html#l00128">recordPacket()</a>, <a class="el" href="a00403.html#l00015">PassedMessage::UPPER_CONTROL</a>, and <a class="el" href="a00337.html#l00049">upperControlOut</a>.</p>

<p>Referenced by <a class="el" href="a00338.html#l00137">BaseMacLayer::handleLowerControl()</a>, <a class="el" href="a00434.html#l00135">Mac80211::handleUpperMsg()</a>, <a class="el" href="a00432.html#l00091">CSMAMacLayer::handleUpperMsg()</a>, <a class="el" href="a00432.html#l00232">CSMAMacLayer::scheduleBackoff()</a>, and <a class="el" href="a00434.html#l00988">Mac80211::testMaxAttempts()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00118"></a>00118                                            {
<a name="l00119"></a>00119     <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a50862e80d4bad52c451a413eef983c16ae">PassedMessage::OUTGOING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6ea991e99dac6c91c9e3e89f902f1075d">PassedMessage::UPPER_CONTROL</a>,msg);
<a name="l00120"></a>00120     send(msg, <a class="code" href="a00016.html#5e0a6cb17bfc2fd3127ac884d0e9d3c8">upperControlOut</a>);
<a name="l00121"></a>00121 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1873d6e3fc6d92cf8482b39f1c5ac6c8"></a><!-- doxytag: member="BaseLayer::sendDown" ref="1873d6e3fc6d92cf8482b39f1c5ac6c8" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::sendDown           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a message to the lower layer. 
<p>
Short hand for send(msg, lowerGateOut);<p>
You have to take care of encapsulation We recommend that you use a pair of functions called encapsMsg/decapsMsg. 
<p>Definition at line <a class="el" href="a00336.html#l00108">108</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00403.html#l00016">PassedMessage::LOWER_DATA</a>, <a class="el" href="a00337.html#l00047">lowerGateOut</a>, <a class="el" href="a00403.html#l00022">PassedMessage::OUTGOING</a>, and <a class="el" href="a00336.html#l00128">recordPacket()</a>.</p>

<p>Referenced by <a class="el" href="a00432.html#l00208">CSMAMacLayer::handleLowerControl()</a>, <a class="el" href="a00344.html#l00128">BaseNetwLayer::handleUpperMsg()</a>, <a class="el" href="a00338.html#l00102">BaseMacLayer::handleUpperMsg()</a>, <a class="el" href="a00434.html#l00782">Mac80211::sendACKframe()</a>, <a class="el" href="a00352.html#l00100">TestApplLayer::sendBroadcast()</a>, <a class="el" href="a00434.html#l00897">Mac80211::sendBROADCASTframe()</a>, <a class="el" href="a00434.html#l00860">Mac80211::sendCTSframe()</a>, <a class="el" href="a00434.html#l00742">Mac80211::sendDATAframe()</a>, and <a class="el" href="a00434.html#l00818">Mac80211::sendRTSframe()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00108"></a>00108                                       {
<a name="l00109"></a>00109     <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a50862e80d4bad52c451a413eef983c16ae">PassedMessage::OUTGOING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e697265ac51f333c88508670c5d3f5ded9">PassedMessage::LOWER_DATA</a>,msg);
<a name="l00110"></a>00110     send(msg, <a class="code" href="a00016.html#82e7427443b7c2496e36220830d8bdba">lowerGateOut</a>);
<a name="l00111"></a>00111 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dbf061566606041db811b519f0400ed5"></a><!-- doxytag: member="BaseLayer::sendUp" ref="dbf061566606041db811b519f0400ed5" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::sendUp           </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a message to the upper layer. 
<p>
Short hand for send(msg, upperGateOut); You have to take care of decapsulation and deletion of superflous frames. We recommend that you use a pair of functions decapsMsg/encapsMsg. 
<p>Definition at line <a class="el" href="a00336.html#l00113">113</a> of file <a class="el" href="a00336.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00403.html#l00022">PassedMessage::OUTGOING</a>, <a class="el" href="a00336.html#l00128">recordPacket()</a>, <a class="el" href="a00403.html#l00014">PassedMessage::UPPER_DATA</a>, and <a class="el" href="a00337.html#l00045">upperGateOut</a>.</p>

<p>Referenced by <a class="el" href="a00434.html#l00562">Mac80211::handleBroadcastMsg()</a>, <a class="el" href="a00434.html#l00493">Mac80211::handleDATAframe()</a>, <a class="el" href="a00432.html#l00190">CSMAMacLayer::handleLowerMsg()</a>, <a class="el" href="a00344.html#l00111">BaseNetwLayer::handleLowerMsg()</a>, and <a class="el" href="a00338.html#l00116">BaseMacLayer::handleLowerMsg()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00113"></a>00113                                     {
<a name="l00114"></a>00114     <a class="code" href="a00016.html#33f4f320f4b6c4ec48651847338ff47f">recordPacket</a>(<a class="code" href="a00108.html#11c83e74aa007c495b32ec3ed4953a50862e80d4bad52c451a413eef983c16ae">PassedMessage::OUTGOING</a>,<a class="code" href="a00108.html#7738b6f08855f784d1012de87fbfd9e6df76d3ca7bb9a62bed70965639d59859">PassedMessage::UPPER_DATA</a>,msg);
<a name="l00115"></a>00115     send(msg, <a class="code" href="a00016.html#98085c0f424ef86e2c7e1a1abe3d0cac">upperGateOut</a>);
<a name="l00116"></a>00116 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="ef0f20a7d27c6f6af97b4d04721ce4c6"></a><!-- doxytag: member="BaseLayer::catPassedMsg" ref="ef0f20a7d27c6f6af97b4d04721ce4c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#ef0f20a7d27c6f6af97b4d04721ce4c6">BaseLayer::catPassedMsg</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00056">56</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, and <a class="el" href="a00336.html#l00128">recordPacket()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f20218f97a82a544a6f7c4316b5486d1"></a><!-- doxytag: member="BaseLayer::doStats" ref="f20218f97a82a544a6f7c4316b5486d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="a00016.html#f20218f97a82a544a6f7c4316b5486d1">BaseLayer::doStats</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00055">55</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, <a class="el" href="a00336.html#l00128">recordPacket()</a>, and <a class="el" href="a00336.html#l00143">~BaseLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9377542e2efeb2cfdd53f54c1ddca418"></a><!-- doxytag: member="BaseLayer::hostId" ref="9377542e2efeb2cfdd53f54c1ddca418" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#9377542e2efeb2cfdd53f54c1ddca418">BaseLayer::hostId</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The hosts id. 
<p>

<p>Reimplemented from <a class="el" href="a00019.html#662f36472ead049d2e1c70409fd08242">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="a00337.html#l00058">58</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, and <a class="el" href="a00336.html#l00128">recordPacket()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1d2eb99059680b97b366ae8342f18af5"></a><!-- doxytag: member="BaseLayer::lowerControlIn" ref="1d2eb99059680b97b366ae8342f18af5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#1d2eb99059680b97b366ae8342f18af5">BaseLayer::lowerControlIn</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00050">50</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>, and <a class="el" href="a00336.html#l00036">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="380159410191c5ea0e5f95766a4814dd"></a><!-- doxytag: member="BaseLayer::lowerControlOut" ref="380159410191c5ea0e5f95766a4814dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#380159410191c5ea0e5f95766a4814dd">BaseLayer::lowerControlOut</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00051">51</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, and <a class="el" href="a00336.html#l00123">sendControlDown()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0d76b53f4d69d3d6e58e0b50a84c9200"></a><!-- doxytag: member="BaseLayer::lowerGateIn" ref="0d76b53f4d69d3d6e58e0b50a84c9200" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#0d76b53f4d69d3d6e58e0b50a84c9200">BaseLayer::lowerGateIn</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00046">46</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>, and <a class="el" href="a00336.html#l00036">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="82e7427443b7c2496e36220830d8bdba"></a><!-- doxytag: member="BaseLayer::lowerGateOut" ref="82e7427443b7c2496e36220830d8bdba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#82e7427443b7c2496e36220830d8bdba">BaseLayer::lowerGateOut</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00047">47</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, <a class="el" href="a00330.html#l00044">BaseApplLayer::sendDelayedDown()</a>, and <a class="el" href="a00336.html#l00108">sendDown()</a>.</p>

</div>
</div><p>
<a class="anchor" name="df7be46c3b45429ae7e45c466202eebd"></a><!-- doxytag: member="BaseLayer::passedMsg" ref="df7be46c3b45429ae7e45c466202eebd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00108.html">PassedMessage</a>* <a class="el" href="a00016.html#df7be46c3b45429ae7e45c466202eebd">BaseLayer::passedMsg</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00057">57</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, <a class="el" href="a00336.html#l00128">recordPacket()</a>, and <a class="el" href="a00336.html#l00143">~BaseLayer()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ba75bba311458c62b4b2fa2bb9711a91"></a><!-- doxytag: member="BaseLayer::upperControlIn" ref="ba75bba311458c62b4b2fa2bb9711a91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#ba75bba311458c62b4b2fa2bb9711a91">BaseLayer::upperControlIn</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00048">48</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>, and <a class="el" href="a00336.html#l00036">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5e0a6cb17bfc2fd3127ac884d0e9d3c8"></a><!-- doxytag: member="BaseLayer::upperControlOut" ref="5e0a6cb17bfc2fd3127ac884d0e9d3c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#5e0a6cb17bfc2fd3127ac884d0e9d3c8">BaseLayer::upperControlOut</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00049">49</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, and <a class="el" href="a00336.html#l00118">sendControlUp()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8a3984579f72a44847e70009fd184180"></a><!-- doxytag: member="BaseLayer::upperGateIn" ref="8a3984579f72a44847e70009fd184180" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#8a3984579f72a44847e70009fd184180">BaseLayer::upperGateIn</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
gate id 
<p>

<p>Definition at line <a class="el" href="a00337.html#l00044">44</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00073">handleMessage()</a>, and <a class="el" href="a00336.html#l00036">initialize()</a>.</p>

</div>
</div><p>
<a class="anchor" name="98085c0f424ef86e2c7e1a1abe3d0cac"></a><!-- doxytag: member="BaseLayer::upperGateOut" ref="98085c0f424ef86e2c7e1a1abe3d0cac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00016.html#98085c0f424ef86e2c7e1a1abe3d0cac">BaseLayer::upperGateOut</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00337.html#l00045">45</a> of file <a class="el" href="a00337.html">BaseLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00336.html#l00036">initialize()</a>, and <a class="el" href="a00336.html#l00113">sendUp()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>base/modules/<a class="el" href="a00337.html">BaseLayer.h</a><li>base/modules/<a class="el" href="a00336.html">BaseLayer.cc</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 28 15:56:58 2009 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
