# makefrag for top level directory of MiXiM
#
# this file automatically gets inserted into Makefiles generated by opp_makemake

# help output
help:
	@echo 
	@echo "*******************************************************************"
	@echo "	Targets are:"
	@echo "	base		-- create base"
	@echo "	modules		-- create modules"
	@echo "	tests		-- create tests "
	@echo "	examples	-- create example networks "
	@echo "	configurator	-- create the configuration tool "
	@echo "	all		-- create all of the above "
	@echo "	docs		-- create documentation "
	@echo "	clean		-- clean  everything up "
	@echo "	distclean	-- get back to pristine fresh state "
	@echo "*******************************************************************"

# make all
all: base_dir modules_dir examples_dir tests_dir

distclean: clean
	@cd configurator &&  $(MAKE) distclean
	@rm -rf out
	@rm -rf doc/api
	@rm -rf doc/neddoc
	@rm -f doc/miximtags.xml
	@rm -f base/Makefile
	@rm -f modules/Makefile
	@rm -f examples/analogueModels/Makefile
	@rm -f examples/Makefile
	@rm -f examples/CSMAMac/Makefile
	@rm -f examples/phyLayer/Makefile
	@rm -f tests/connectionManager/Makefile
	@rm -f tests/Makefile
	@rm -f tests/basePhyLayer/Makefile
	@rm -f tests/blackboard/Makefile
	@rm -f tests/coord/Makefile
	@rm -f tests/baseMobility/Makefile
	@rm -f tests/radioState/Makefile
	@rm -f tests/channelInfo/Makefile
	@rm -f tests/testUtils/Makefile
	@rm -f tests/mapping/Makefile
	@rm -f Makefile

# add dependencies:
modules_dir: base_dir
examples_dir: modules_dir
tests_dir: modules_dir

# documentation
DOC_DIR=doc

# generate all docs (API and neddoc reference)
docs: doxy #neddoc

# generate doxygen API reference
doxy: $(DOC_DIR)/doxy.cfg
	doxygen $(DOC_DIR)/doxy.cfg

# generate neddoc documentation linked to doxygen API reference
#neddoc:
#	opp_neddoc -o $(DOC_DIR)/neddoc -t $(DOC_DIR)/miximtags.xml -d ../api \
#	base/ examples/ modules/ doc/
#
#neddoc-without-doxy:
#	opp_neddoc -o $(DOC_DIR)/neddoc -d ../api base/ examples/ modules/ doc/

